<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api-documentation for
    <a

        href="https://github.com/tgriesser/knex#readme"

    >knex (v0.12.8)</a>
</h1>
<h4>A batteries-included SQL query & schema builder for Postgres, MySQL and SQLite3 and the Browser</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex">module knex</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client">
            function <span class="apidocSignatureSpan">knex.</span>Client
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter">
            function <span class="apidocSignatureSpan">knex.</span>formatter
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.functionhelper">
            function <span class="apidocSignatureSpan">knex.</span>functionhelper
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate">
            function <span class="apidocSignatureSpan">knex.</span>migrate
            <span class="apidocSignatureSpan">(knex)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw">
            function <span class="apidocSignatureSpan">knex.</span>raw
            <span class="apidocSignatureSpan">(sql, bindings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner">
            function <span class="apidocSignatureSpan">knex.</span>runner
            <span class="apidocSignatureSpan">(client, builder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed">
            function <span class="apidocSignatureSpan">knex.</span>seed
            <span class="apidocSignatureSpan">(knex)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction">
            function <span class="apidocSignatureSpan">knex.</span>transaction
            <span class="apidocSignatureSpan">(client, container, config, outerTx)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>Client.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>formatter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>functionhelper.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>helpers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>migrate.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>raw.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>runner.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>seed.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">knex.</span>transaction.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.Client">module knex.Client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.Client">
            function <span class="apidocSignatureSpan">knex.</span>Client
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.super_">
            function <span class="apidocSignatureSpan">knex.Client.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.Client.prototype">module knex.Client.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">knex.Client.prototype.</span>canCancelQuery</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype._escapeBinding">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>_escapeBinding
            <span class="apidocSignatureSpan">(val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype._formatQuery">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>_formatQuery
            <span class="apidocSignatureSpan">(sql, bindings, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.acquireConnection">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>acquireConnection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.assertCanCancelQuery">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>assertCanCancelQuery
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.cancelQuery">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>cancelQuery
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.columnBuilder">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>columnBuilder
            <span class="apidocSignatureSpan">(tableBuilder, type, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.columnCompiler">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>columnCompiler
            <span class="apidocSignatureSpan">(tableBuilder, columnBuilder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.database">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>database
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.destroy">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>destroy
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.formatter">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>formatter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.initializeDriver">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>initializeDriver
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.initializePool">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>initializePool
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.poolDefaults">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>poolDefaults
            <span class="apidocSignatureSpan">(poolConfig)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.prepBindings">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>prepBindings
            <span class="apidocSignatureSpan">(bindings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.query">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>query
            <span class="apidocSignatureSpan">(connection, obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.queryBuilder">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>queryBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.queryCompiler">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>queryCompiler
            <span class="apidocSignatureSpan">(builder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.raw">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>raw
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.releaseConnection">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>releaseConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.runner">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>runner
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.schemaBuilder">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>schemaBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.schemaCompiler">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>schemaCompiler
            <span class="apidocSignatureSpan">(builder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.stream">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>stream
            <span class="apidocSignatureSpan">(connection, obj, _stream, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.tableBuilder">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>tableBuilder
            <span class="apidocSignatureSpan">(type, tableName, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.tableCompiler">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>tableCompiler
            <span class="apidocSignatureSpan">(tableBuilder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.toString">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.transaction">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>transaction
            <span class="apidocSignatureSpan">(container, config, outerTx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.validateConnection">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>validateConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.Client.prototype.wrapIdentifier">
            function <span class="apidocSignatureSpan">knex.Client.prototype.</span>wrapIdentifier
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.formatter">module knex.formatter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.formatter">
            function <span class="apidocSignatureSpan">knex.</span>formatter
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.formatter.prototype">module knex.formatter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype._wrapString">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>_wrapString
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.alias">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>alias
            <span class="apidocSignatureSpan">(first, second)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.columnize">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>columnize
            <span class="apidocSignatureSpan">(target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.compileCallback">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>compileCallback
            <span class="apidocSignatureSpan">(callback, method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.direction">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>direction
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.operator">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>operator
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.outputQuery">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>outputQuery
            <span class="apidocSignatureSpan">(compiled, isParameter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.parameter">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>parameter
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.parameterize">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>parameterize
            <span class="apidocSignatureSpan">(values, notSetValue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.rawOrFn">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>rawOrFn
            <span class="apidocSignatureSpan">(value, method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.unwrapRaw">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>unwrapRaw
            <span class="apidocSignatureSpan">(value, isParameter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.wrap">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>wrap
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.formatter.prototype.wrapAsIdentifier">
            function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>wrapAsIdentifier
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.functionhelper">module knex.functionhelper</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.functionhelper.functionhelper">
            function <span class="apidocSignatureSpan">knex.</span>functionhelper
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.functionhelper.prototype">module knex.functionhelper.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.functionhelper.prototype.now">
            function <span class="apidocSignatureSpan">knex.functionhelper.prototype.</span>now
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.helpers">module knex.helpers</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">knex.helpers.</span>__esModule</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.containsUndefined">
            function <span class="apidocSignatureSpan">knex.helpers.</span>containsUndefined
            <span class="apidocSignatureSpan">(mixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.debugLog">
            function <span class="apidocSignatureSpan">knex.helpers.</span>debugLog
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.deprecate">
            function <span class="apidocSignatureSpan">knex.helpers.</span>deprecate
            <span class="apidocSignatureSpan">(method, alternate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.error">
            function <span class="apidocSignatureSpan">knex.helpers.</span>error
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.exit">
            function <span class="apidocSignatureSpan">knex.helpers.</span>exit
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.normalizeArr">
            function <span class="apidocSignatureSpan">knex.helpers.</span>normalizeArr
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.skim">
            function <span class="apidocSignatureSpan">knex.helpers.</span>skim
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.helpers.warn">
            function <span class="apidocSignatureSpan">knex.helpers.</span>warn
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.migrate">module knex.migrate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.migrate">
            function <span class="apidocSignatureSpan">knex.</span>migrate
            <span class="apidocSignatureSpan">(knex)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.migrate.prototype">module knex.migrate.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._absoluteConfigDir">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_absoluteConfigDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._createMigrationLockTable">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_createMigrationLockTable
            <span class="apidocSignatureSpan">(tableName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._createMigrationTable">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_createMigrationTable
            <span class="apidocSignatureSpan">(tableName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._ensureFolder">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_ensureFolder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._ensureTable">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_ensureTable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._freeLock">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_freeLock
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._generateStubTemplate">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_generateStubTemplate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._getLastBatch">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLastBatch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._getLock">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLock
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._getLockTableName">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLockTableName
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._isLocked">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_isLocked
            <span class="apidocSignatureSpan">(trx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._latestBatchNumber">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_latestBatchNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._listAll">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_listAll
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._listCompleted">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_listCompleted
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._lockMigrations">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_lockMigrations
            <span class="apidocSignatureSpan">(trx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._migrationData">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_migrationData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._runBatch">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_runBatch
            <span class="apidocSignatureSpan">(migrations, direction)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._transaction">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_transaction
            <span class="apidocSignatureSpan">(migration, direction, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._useTransaction">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_useTransaction
            <span class="apidocSignatureSpan">(migration, allTransactionsDisabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._validateMigrationStructure">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_validateMigrationStructure
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._waterfallBatch">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_waterfallBatch
            <span class="apidocSignatureSpan">(batchNo, migrations, direction)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype._writeNewMigration">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_writeNewMigration
            <span class="apidocSignatureSpan">(name, tmpl)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.currentVersion">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>currentVersion
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.forceFreeMigrationsLock">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>forceFreeMigrationsLock
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.latest">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>latest
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.make">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>make
            <span class="apidocSignatureSpan">(name, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.rollback">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>rollback
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.setConfig">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>setConfig
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.migrate.prototype.status">
            function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>status
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.raw">module knex.raw</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.raw">
            function <span class="apidocSignatureSpan">knex.</span>raw
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.super_">
            function <span class="apidocSignatureSpan">knex.raw.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.raw.prototype">module knex.raw.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.asCallback">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>asCallback
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.bind">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>bind
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.catch">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>catch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.connection">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>connection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.debug">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>debug
            <span class="apidocSignatureSpan">(enabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.delay">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>delay
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.ensure">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>ensure
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.finally">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>finally
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.get">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.map">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>map
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.mapSeries">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>mapSeries
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.options">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>options
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.pipe">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>pipe
            <span class="apidocSignatureSpan">(writable, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.reduce">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>reduce
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.reflect">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>reflect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.return">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>return
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.set">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>set
            <span class="apidocSignatureSpan">(sql, bindings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.spread">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>spread
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.stream">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>stream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.tap">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>tap
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.then">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>then
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.thenReturn">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>thenReturn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.timeout">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>timeout
            <span class="apidocSignatureSpan">(ms)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.toQuery">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toQuery
            <span class="apidocSignatureSpan">(tz)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.toSQL">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toSQL
            <span class="apidocSignatureSpan">(method, tz)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.toString">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.transacting">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>transacting
            <span class="apidocSignatureSpan">(t)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.wrap">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>wrap
            <span class="apidocSignatureSpan">(before, after)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.raw.prototype.yield">
            function <span class="apidocSignatureSpan">knex.raw.prototype.</span>yield
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.runner">module knex.runner</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.runner">
            function <span class="apidocSignatureSpan">knex.</span>runner
            <span class="apidocSignatureSpan">(client, builder)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.runner.prototype">module knex.runner.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.ensureConnection">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>ensureConnection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.pipe">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>pipe
            <span class="apidocSignatureSpan">(writable, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.query">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>query
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.queryArray">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>queryArray
            <span class="apidocSignatureSpan">(queries)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.run">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.runner.prototype.stream">
            function <span class="apidocSignatureSpan">knex.runner.prototype.</span>stream
            <span class="apidocSignatureSpan">(options, handler)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.seed">module knex.seed</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.seed">
            function <span class="apidocSignatureSpan">knex.</span>seed
            <span class="apidocSignatureSpan">(knex)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.seed.prototype">module knex.seed.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._absoluteConfigDir">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_absoluteConfigDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._ensureFolder">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_ensureFolder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._generateStubTemplate">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_generateStubTemplate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._listAll">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_listAll
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._runSeeds">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_runSeeds
            <span class="apidocSignatureSpan">(seeds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._seedData">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_seedData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._validateSeedStructure">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_validateSeedStructure
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._waterfallBatch">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_waterfallBatch
            <span class="apidocSignatureSpan">(seeds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype._writeNewSeed">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_writeNewSeed
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype.make">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>make
            <span class="apidocSignatureSpan">(name, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype.run">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.seed.prototype.setConfig">
            function <span class="apidocSignatureSpan">knex.seed.prototype.</span>setConfig
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.transaction">module knex.transaction</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.transaction">
            function <span class="apidocSignatureSpan">knex.</span>transaction
            <span class="apidocSignatureSpan">(client, container, config, outerTx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.knex.transaction.prototype">module knex.transaction.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.acquireConnection">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>acquireConnection
            <span class="apidocSignatureSpan">(client, config, txid)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.asCallback">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>asCallback
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.begin">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>begin
            <span class="apidocSignatureSpan">(conn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.bind">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>bind
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.catch">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>catch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.commit">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>commit
            <span class="apidocSignatureSpan">(conn, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.debug">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>debug
            <span class="apidocSignatureSpan">(enabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.delay">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>delay
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.ensure">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>ensure
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.exec">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>exec
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.finally">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>finally
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.get">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.isCompleted">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>isCompleted
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.map">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>map
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.mapSeries">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>mapSeries
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.query">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>query
            <span class="apidocSignatureSpan">(conn, sql, status, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.reduce">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>reduce
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.reflect">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>reflect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.release">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>release
            <span class="apidocSignatureSpan">(conn, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.return">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>return
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.rollback">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>rollback
            <span class="apidocSignatureSpan">(conn, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.rollbackTo">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>rollbackTo
            <span class="apidocSignatureSpan">(conn, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.savepoint">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>savepoint
            <span class="apidocSignatureSpan">(conn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.spread">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>spread
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.tap">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>tap
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.then">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>then
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.thenReturn">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>thenReturn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.knex.transaction.prototype.yield">
            function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>yield
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex" id="apidoc.module.knex">module knex</a></h1>


    <h2>
        <a href="#apidoc.element.knex.Client" id="apidoc.element.knex.Client">
        function <span class="apidocSignatureSpan">knex.</span>Client
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client() {
  var config = arguments.length &#x3c;= 0 || arguments[0] === undefined ? {} : arguments[0];

  this.config = config;

  //Client is a required field, so throw error if it&#x27;s not supplied.
  //If &#x27;this.dialect&#x27; is set, then this is a &#x27;super()&#x27; call, in which case
  //&#x27;client&#x27; does not have to be set as it&#x27;s already assigned on the client prototype.
  if (!this.config.client &#x26;&#x26; !this.dialect) {
    throw new Error(&#x27;knex: Required configuration option \&#x27;client\&#x27; is missing.&#x27;);
  }

  this.connectionSettings = (0, _cloneDeep3.default)(config.connection || {});
  if (this.driverName &#x26;&#x26; config.connection) {
    this.initializeDriver();
    if (!config.pool || config.pool &#x26;&#x26; config.pool.max !== 0) {
      this.__cid = clientId();
      this.initializePool(config);
    }
  }
  this.valueForUndefined = this.raw(&#x27;DEFAULT&#x27;);
  if (config.useNullAsDefault) {
    this.valueForUndefined = null;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter" id="apidoc.element.knex.formatter">
        function <span class="apidocSignatureSpan">knex.</span>formatter
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Formatter(client) {
  (0, _classCallCheck3.default)(this, Formatter);

  this.client = client;
  this.bindings = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return this.toQuery();
  },


  // Returns the raw sql for the query.
  toSQL: function toSQL(method, tz) {
var obj = void 0;
var formatter = this.client.<span class="apidocCodeKeywordSpan">formatter</span>();

if (Array.isArray(this.bindings)) {
  obj = replaceRawArrBindings(this, formatter);
} else if (this.bindings &#x26;&#x26; (0, _isPlainObject3.default)(this.bindings)) {
  obj = replaceKeyBindings(this, formatter);
} else {
  obj = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.functionhelper" id="apidoc.element.knex.functionhelper">
        function <span class="apidocSignatureSpan">knex.</span>functionhelper
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FunctionHelper(client) {
  this.client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate" id="apidoc.element.knex.migrate">
        function <span class="apidocSignatureSpan">knex.</span>migrate
        <span class="apidocSignatureSpan">(knex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Migrator(knex) {
  (0, _classCallCheck3.default)(this, Migrator);

  this.knex = knex;
  this.config = this.setConfig(knex.client.config.migrations);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw" id="apidoc.element.knex.raw">
        function <span class="apidocSignatureSpan">knex.</span>raw
        <span class="apidocSignatureSpan">(sql, bindings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">raw = function (sql, bindings) {
  (0, _helpers.warn)(&#x27;global Knex.raw is deprecated, use knex.raw (chain off an initialized knex object)&#x27;);
  return new _raw2.default().set(sql, bindings);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// FunctionHelper
// -------
function FunctionHelper(client) {
  this.client = client;
}

FunctionHelper.prototype.now = function () {
  return this.client.<span class="apidocCodeKeywordSpan">raw</span>(&#x27;CURRENT_TIMESTAMP&#x27;);
};

exports.default = FunctionHelper;
module.exports = exports[&#x27;default&#x27;];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner" id="apidoc.element.knex.runner">
        function <span class="apidocSignatureSpan">knex.</span>runner
        <span class="apidocSignatureSpan">(client, builder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Runner(client, builder) {
  this.client = client;
  this.builder = builder;
  this.queries = [];

  // The &#x22;connection&#x22; object is set on the runner when
  // &#x22;run&#x22; is called.
  this.connection = void 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.<span class="apidocCodeKeywordSpan">runner</span>(this).run();
  return result.then.apply(result, arguments);
};

// Add additional &#x22;options&#x22; to the builder. Typically used for client specific
// items, like the `mysql` and `sqlite3` drivers.
Target.prototype.options = function (opts) {
  this._options = this._options || [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed" id="apidoc.element.knex.seed">
        function <span class="apidocSignatureSpan">knex.</span>seed
        <span class="apidocSignatureSpan">(knex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Seeder(knex) {
  this.knex = knex;
  this.config = this.setConfig(knex.client.config.seeds);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction" id="apidoc.element.knex.transaction">
        function <span class="apidocSignatureSpan">knex.</span>transaction
        <span class="apidocSignatureSpan">(client, container, config, outerTx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Transaction(client, container, config, outerTx) {
  (0, _classCallCheck3.default)(this, Transaction);

  var _this = (0, _possibleConstructorReturn3.default)(this, _EventEmitter.call(this));

  var txid = _this.txid = (0, _uniqueId3.default)(&#x27;trx&#x27;);

  _this.client = client;
  _this.outerTx = outerTx;
  _this.trxClient = undefined;
  _this._debug = client.config &#x26;&#x26; client.config.debug;

  debug(&#x27;%s: Starting %s transaction&#x27;, txid, outerTx ? &#x27;nested&#x27; : &#x27;top level&#x27;);

  _this._promise = _bluebird2.default.using(_this.acquireConnection(client, config, txid), function (connection) {

    var trxClient = _this.trxClient = makeTxClient(_this, client, connection);
    var init = client.transacting ? _this.savepoint(connection) : _this.begin(connection);

    init.then(function () {
      return makeTransactor(_this, connection, trxClient);
    }).then(function (transactor) {
      // If we&#x27;ve returned a &#x22;thenable&#x22; from the transaction container, assume
      // the rollback and commit are chained to this object&#x27;s success / failure.
      // Directly thrown errors are treated as automatic rollbacks.
      var result = void 0;
      try {
        result = container(transactor);
      } catch (err) {
        result = _bluebird2.default.reject(err);
      }
      if (result &#x26;&#x26; result.then &#x26;&#x26; typeof result.then === &#x27;function&#x27;) {
        result.then(function (val) {
          return transactor.commit(val);
        }).catch(function (err) {
          return transactor.rollback(err);
        });
      }
      return null;
    }).catch(function (e) {
      return _this._rejecter(e);
    });

    return new _bluebird2.default(function (resolver, rejecter) {
      _this._resolver = resolver;
      _this._rejecter = rejecter;
    });
  });

  _this._completed = false;

  // If there&#x27;s a wrapping transaction, we need to wait for any older sibling
  // transactions to settle (commit or rollback) before we can start, and we
  // need to register ourselves with the parent transaction so any younger
  // siblings can wait for us to complete before they can start.
  _this._previousSibling = _bluebird2.default.resolve(true);
  if (outerTx) {
    if (outerTx._lastChild) _this._previousSibling = outerTx._lastChild;
    outerTx._lastChild = _this._promise;
  }
  return _this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports.default = Transaction;
function makeTransactor(trx, connection, trxClient) {

var transactor = (0, _makeKnex2.default)(trxClient);

transactor.transaction = function (container, options) {
  return trxClient.<span class="apidocCodeKeywordSpan">transaction</span>(container, options, trx);
};
transactor.savepoint = function (container, options) {
  return transactor.transaction(container, options);
};

if (trx.client.transacting) {
  transactor.commit = function (value) {
...</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.Client" id="apidoc.module.knex.Client">module knex.Client</a></h1>


    <h2>
        <a href="#apidoc.element.knex.Client.Client" id="apidoc.element.knex.Client.Client">
        function <span class="apidocSignatureSpan">knex.</span>Client
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client() {
  var config = arguments.length &#x3c;= 0 || arguments[0] === undefined ? {} : arguments[0];

  this.config = config;

  //Client is a required field, so throw error if it&#x27;s not supplied.
  //If &#x27;this.dialect&#x27; is set, then this is a &#x27;super()&#x27; call, in which case
  //&#x27;client&#x27; does not have to be set as it&#x27;s already assigned on the client prototype.
  if (!this.config.client &#x26;&#x26; !this.dialect) {
    throw new Error(&#x27;knex: Required configuration option \&#x27;client\&#x27; is missing.&#x27;);
  }

  this.connectionSettings = (0, _cloneDeep3.default)(config.connection || {});
  if (this.driverName &#x26;&#x26; config.connection) {
    this.initializeDriver();
    if (!config.pool || config.pool &#x26;&#x26; config.pool.max !== 0) {
      this.__cid = clientId();
      this.initializePool(config);
    }
  }
  this.valueForUndefined = this.raw(&#x27;DEFAULT&#x27;);
  if (config.useNullAsDefault) {
    this.valueForUndefined = null;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.super_" id="apidoc.element.knex.Client.super_">
        function <span class="apidocSignatureSpan">knex.Client.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.Client.prototype" id="apidoc.module.knex.Client.prototype">module knex.Client.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.knex.Client.prototype._escapeBinding" id="apidoc.element.knex.Client.prototype._escapeBinding">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>_escapeBinding
        <span class="apidocSignatureSpan">(val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function finalEscape(val) {
  var ctx = arguments.length &#x3c;= 1 || arguments[1] === undefined ? {} : arguments[1];

  return escapeFn(val, finalEscape, ctx);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype._formatQuery" id="apidoc.element.knex.Client.prototype._formatQuery">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>_formatQuery
        <span class="apidocSignatureSpan">(sql, bindings, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _formatQuery(sql, bindings, timeZone) {
  var _this = this;

  bindings = bindings == null ? [] : [].concat(bindings);
  var index = 0;
  return sql.replace(/\\?\?/g, function (match) {
    if (match === &#x27;\\?&#x27;) {
      return &#x27;?&#x27;;
    }
    if (index === bindings.length) {
      return match;
    }
    var value = bindings[index++];
    return _this._escapeBinding(value, { timeZone: timeZone });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Target.prototype.toQuery = function (tz) {
  var _this = this;

  var data = this.toSQL(this._method, tz);
  if (!(0, _isArray3.default)(data)) data = [data];
  return (0, _map3.default)(data, function (statement) {
    return _this.client.<span class="apidocCodeKeywordSpan">_formatQuery</span>(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.runner(this).run();
  return result.then.apply(result, arguments);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.acquireConnection" id="apidoc.element.knex.Client.prototype.acquireConnection">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>acquireConnection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function acquireConnection() {
  var _this4 = this;

  return new _bluebird2.default(function (resolver, rejecter) {
    if (!_this4.pool) {
      return rejecter(new Error(&#x27;Unable to acquire a connection&#x27;));
    }
    var wasRejected = false;
    var t = setTimeout(function () {
      wasRejected = true;
      rejecter(new _bluebird2.default.TimeoutError(&#x27;Knex: Timeout acquiring a connection. The pool is probably full. &#x27; + &#x27;Are you
 missing a .transacting(trx) call?&#x27;));
    }, _this4.config.acquireConnectionTimeout || 60000);
    _this4.pool.acquire(function (err, connection) {
      clearTimeout(t);
      if (err) {
        return rejecter(err);
      }
      if (wasRejected) {
        _this4.pool.release(connection);
      } else {
        debug(&#x27;acquired connection from pool: %s&#x27;, connection.__knexUid);
        resolver(connection);
      }
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Check whether there&#x27;s a transaction flag, and that it has a connection.
  ensureConnection: function ensureConnection() {
var _this2 = this;

return _bluebird2.default.try(function () {
  return _this2.connection || new _bluebird2.default(function (resolver, rejecter) {
    // need to return promise or null from handler to prevent warning from bluebird
    return _this2.client.<span class="apidocCodeKeywordSpan">acquireConnection</span>().then(resolver).catch(_bluebird2.default.
TimeoutError, function (error) {
      if (_this2.builder) {
        error.sql = _this2.builder.sql;
        error.bindings = _this2.builder.bindings;
      }
      throw error;
    }).catch(rejecter);
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.assertCanCancelQuery" id="apidoc.element.knex.Client.prototype.assertCanCancelQuery">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>assertCanCancelQuery
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function assertCanCancelQuery() {
  if (!this.canCancelQuery) {
    throw new Error(&#x22;Query cancelling not supported for this dialect&#x22;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var _ref = arguments.length &#x3c;= 1 || arguments[1] === undefined ? {} : arguments[1];

  var cancel = _ref.cancel;

  if ((0, _isNumber3.default)(ms) &#x26;&#x26; ms &#x3e; 0) {
    this._timeout = ms;
    if (cancel) {
      this.client.<span class="apidocCodeKeywordSpan">assertCanCancelQuery</span>();
      this._cancelOnTimeout = true;
    }
  }
  return this;
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.cancelQuery" id="apidoc.element.knex.Client.prototype.cancelQuery">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>cancelQuery
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function cancelQuery() {
  throw new Error(&#x22;Query cancelling not supported for this dialect&#x22;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var timeout = obj.timeout;
var sql = obj.sql;
var bindings = obj.bindings;


var cancelQuery = void 0;
if (obj.cancelOnTimeout) {
  cancelQuery = _this.client.<span class="apidocCodeKeywordSpan">cancelQuery</span>(_this.connection);
} else {
  cancelQuery = _bluebird2.default.resolve();
}

return cancelQuery.catch(function (cancelError) {
  // cancellation failed
  throw (0, _assign3.default)(cancelError, {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.columnBuilder" id="apidoc.element.knex.Client.prototype.columnBuilder">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>columnBuilder
        <span class="apidocSignatureSpan">(tableBuilder, type, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function columnBuilder(tableBuilder, type, args) {
  return new _columnbuilder2.default(this, tableBuilder, type, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.columnCompiler" id="apidoc.element.knex.Client.prototype.columnCompiler">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>columnCompiler
        <span class="apidocSignatureSpan">(tableBuilder, columnBuilder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function columnCompiler(tableBuilder, columnBuilder) {
  return new _columncompiler2.default(this, tableBuilder, columnBuilder);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.database" id="apidoc.element.knex.Client.prototype.database">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>database
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function database() {
  return this.connectionSettings.database;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.destroy" id="apidoc.element.knex.Client.prototype.destroy">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>destroy
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroy(callback) {
  var _this6 = this;

  var promise = new _bluebird2.default(function (resolver) {
    if (!_this6.pool) {
      return resolver();
    }
    _this6.pool.drain(function () {
      _this6.pool.destroyAllNow(function () {
        _this6.pool = undefined;
        resolver();
      });
    });
  });

  // Allow either a callback or promise interface for destruction.
  if (typeof callback === &#x27;function&#x27;) {
    promise.asCallback(callback);
  } else {
    return promise;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.formatter" id="apidoc.element.knex.Client.prototype.formatter">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>formatter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function formatter() {
  return new _formatter2.default(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return this.toQuery();
  },


  // Returns the raw sql for the query.
  toSQL: function toSQL(method, tz) {
var obj = void 0;
var formatter = this.client.<span class="apidocCodeKeywordSpan">formatter</span>();

if (Array.isArray(this.bindings)) {
  obj = replaceRawArrBindings(this, formatter);
} else if (this.bindings &#x26;&#x26; (0, _isPlainObject3.default)(this.bindings)) {
  obj = replaceKeyBindings(this, formatter);
} else {
  obj = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.initializeDriver" id="apidoc.element.knex.Client.prototype.initializeDriver">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>initializeDriver
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeDriver() {
  try {
    this.driver = this._driver();
  } catch (e) {
    helpers.exit(&#x27;Knex: run\n$ npm install &#x27; + this.driverName + &#x27; --save\n&#x27; + e.stack);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.initializePool" id="apidoc.element.knex.Client.prototype.initializePool">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>initializePool
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializePool(config) {
  if (this.pool) {
    helpers.warn(&#x27;The pool has already been initialized&#x27;);
    return;
  }
  this.pool = new _genericPool.Pool((0, _assign3.default)(this.poolDefaults(config.pool || {}), config.pool));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.poolDefaults" id="apidoc.element.knex.Client.prototype.poolDefaults">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>poolDefaults
        <span class="apidocSignatureSpan">(poolConfig)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function poolDefaults(poolConfig) {
  var _this3 = this;

  var name = this.dialect + &#x27;:&#x27; + this.driverName + &#x27;:&#x27; + this.__cid;
  return {
    min: 2,
    max: 10,
    name: name,
    log: function log(str, level) {
      if (level === &#x27;info&#x27;) {
        debugPool(level.toUpperCase() + &#x27; pool &#x27; + name + &#x27; - &#x27; + str);
      }
    },

    create: function create(callback) {
      _this3.acquireRawConnection().tap(function (connection) {
        connection.__knexUid = (0, _uniqueId3.default)(&#x27;__knexUid&#x27;);
        if (poolConfig.afterCreate) {
          return _bluebird2.default.promisify(poolConfig.afterCreate)(connection);
        }
      }).asCallback(callback);
    },
    destroy: function destroy(connection) {
      if (poolConfig.beforeDestroy) {
        helpers.warn(&#x27;\n            beforeDestroy is deprecated, please open an issue if you use this\n            to discuss alternative
 apis\n          &#x27;);
        poolConfig.beforeDestroy(connection, function () {});
      }
      if (connection !== void 0) {
        _this3.destroyRawConnection(connection);
      }
    },
    validate: function validate(connection) {
      if (connection.__knex__disposed) {
        helpers.warn(&#x27;Connection Error: &#x27; + connection.__knex__disposed);
        return false;
      }
      return _this3.validateConnection(connection);
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.prepBindings" id="apidoc.element.knex.Client.prototype.prepBindings">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>prepBindings
        <span class="apidocSignatureSpan">(bindings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function prepBindings(bindings) {
  return bindings;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.query" id="apidoc.element.knex.Client.prototype.query">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>query
        <span class="apidocSignatureSpan">(connection, obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(connection, obj) {
  var _this2 = this;

  if (typeof obj === &#x27;string&#x27;) obj = { sql: obj };
  obj.bindings = this.prepBindings(obj.bindings);
  debugQuery(obj.sql);
  this.emit(&#x27;query&#x27;, (0, _assign3.default)({ __knexUid: connection.__knexUid }, obj));
  debugBindings(obj.bindings);
  return this._query(connection, obj).catch(function (err) {
    err.message = _this2._formatQuery(obj.sql, obj.bindings) + &#x27; - &#x27; + err.message;
    _this2.emit(&#x27;query-error&#x27;, err, (0, _assign3.default)({ __knexUid: connection.__knexUid }, obj));
    throw err;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (runner.builder._debug) {
    helpers.debugLog(sql);
  }

  if ((0, _isArray3.default)(sql)) {
    return runner.queryArray(sql);
  }
  return runner.<span class="apidocCodeKeywordSpan">query</span>(sql);
})

// If there are any &#x22;error&#x22; listeners, we fire an error event
// and then re-throw the error to be eventually handled by
// the promise chain. Useful if you&#x27;re wrapping in a custom `Promise`.
.catch(function (err) {
  if (runner.builder._events &#x26;&#x26; runner.builder._events.error) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.queryBuilder" id="apidoc.element.knex.Client.prototype.queryBuilder">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>queryBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function queryBuilder() {
  return new _builder2.default(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


  Formatter.prototype.compileCallback = function compileCallback(callback, method) {
var client = this.client;

// Build the callback

var builder = client.<span class="apidocCodeKeywordSpan">queryBuilder</span>();
callback.call(builder, builder);

// Compile the callback, using the current formatter (to track all bindings).
var compiler = client.queryCompiler(builder);
compiler.formatter = this;

// Return the compiled &#x26; parameterized sql.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.queryCompiler" id="apidoc.element.knex.Client.prototype.queryCompiler">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>queryCompiler
        <span class="apidocSignatureSpan">(builder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function queryCompiler(builder) {
  return new _compiler2.default(this, builder);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  return this.unwrapRaw(value, true) || &#x27;?&#x27;;
};

Formatter.prototype.unwrapRaw = function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
    query = this.client.<span class="apidocCodeKeywordSpan">queryCompiler</span>(value).toSQL();
    if (query.bindings) {
      this.bindings = this.bindings.concat(query.bindings);
    }
    return this.outputQuery(query, isParameter);
  }
  if (value instanceof _raw2.default) {
    value.client = this.client;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.raw" id="apidoc.element.knex.Client.prototype.raw">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>raw
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function raw() {
  var _ref;

  return (_ref = new _raw2.default(this)).set.apply(_ref, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// FunctionHelper
// -------
function FunctionHelper(client) {
  this.client = client;
}

FunctionHelper.prototype.now = function () {
  return this.client.<span class="apidocCodeKeywordSpan">raw</span>(&#x27;CURRENT_TIMESTAMP&#x27;);
};

exports.default = FunctionHelper;
module.exports = exports[&#x27;default&#x27;];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.releaseConnection" id="apidoc.element.knex.Client.prototype.releaseConnection">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>releaseConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function releaseConnection(connection) {
  var _this5 = this;

  return new _bluebird2.default(function (resolver) {
    debug(&#x27;releasing connection to pool: %s&#x27;, connection.__knexUid);
    _this5.pool.release(connection);
    resolver();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            error.bindings = _this2.builder.bindings;
          }
          throw error;
        }).catch(rejecter);
      });
    }).disposer(function () {
      // need to return promise or null from handler to prevent warning from bluebird
      return _this2.client.<span class="apidocCodeKeywordSpan">releaseConnection</span>(_this2.connection);
    });
  }
});

exports.default = Runner;
module.exports = exports[&#x27;default&#x27;];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.runner" id="apidoc.element.knex.Client.prototype.runner">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>runner
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function runner(connection) {
  return new _runner2.default(this, connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.<span class="apidocCodeKeywordSpan">runner</span>(this).run();
  return result.then.apply(result, arguments);
};

// Add additional &#x22;options&#x22; to the builder. Typically used for client specific
// items, like the `mysql` and `sqlite3` drivers.
Target.prototype.options = function (opts) {
  this._options = this._options || [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.schemaBuilder" id="apidoc.element.knex.Client.prototype.schemaBuilder">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>schemaBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function schemaBuilder() {
  return new _builder4.default(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.schemaCompiler" id="apidoc.element.knex.Client.prototype.schemaCompiler">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>schemaCompiler
        <span class="apidocSignatureSpan">(builder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function schemaCompiler(builder) {
  return new _compiler4.default(this, builder);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.stream" id="apidoc.element.knex.Client.prototype.stream">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>stream
        <span class="apidocSignatureSpan">(connection, obj, _stream, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stream(connection, obj, _stream, options) {
  if (typeof obj === &#x27;string&#x27;) obj = { sql: obj };
  this.emit(&#x27;query&#x27;, (0, _assign3.default)({ __knexUid: connection.__knexUid }, obj));
  debugQuery(obj.sql);
  obj.bindings = this.prepBindings(obj.bindings);
  debugBindings(obj.bindings);
  return this._stream(connection, obj, _stream, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  }
  return this;
};

// Initializes a stream.
Target.prototype.stream = function (options) {
  return this.client.runner(this).<span class="apidocCodeKeywordSpan">stream</span>(options);
};

// Initialize a stream &#x26; pipe automatically.
Target.prototype.pipe = function (writable, options) {
  return this.client.runner(this).pipe(writable, options);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.tableBuilder" id="apidoc.element.knex.Client.prototype.tableBuilder">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>tableBuilder
        <span class="apidocSignatureSpan">(type, tableName, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tableBuilder(type, tableName, fn) {
  return new _tablebuilder2.default(this, type, tableName, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.tableCompiler" id="apidoc.element.knex.Client.prototype.tableCompiler">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>tableCompiler
        <span class="apidocSignatureSpan">(tableBuilder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tableCompiler(tableBuilder) {
  return new _tablecompiler2.default(this, tableBuilder);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.toString" id="apidoc.element.knex.Client.prototype.toString">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() {
  return &#x27;[object KnexClient]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.transaction" id="apidoc.element.knex.Client.prototype.transaction">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>transaction
        <span class="apidocSignatureSpan">(container, config, outerTx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function transaction(container, config, outerTx) {
  return new _transaction2.default(this, container, config, outerTx);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports.default = Transaction;
function makeTransactor(trx, connection, trxClient) {

var transactor = (0, _makeKnex2.default)(trxClient);

transactor.transaction = function (container, options) {
  return trxClient.<span class="apidocCodeKeywordSpan">transaction</span>(container, options, trx);
};
transactor.savepoint = function (container, options) {
  return transactor.transaction(container, options);
};

if (trx.client.transacting) {
  transactor.commit = function (value) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.validateConnection" id="apidoc.element.knex.Client.prototype.validateConnection">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>validateConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function validateConnection(connection) {
  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.Client.prototype.wrapIdentifier" id="apidoc.element.knex.Client.prototype.wrapIdentifier">
        function <span class="apidocSignatureSpan">knex.Client.prototype.</span>wrapIdentifier
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function wrapIdentifier(value) {
  return value !== &#x27;*&#x27; ? &#x27;&#x22;&#x27; + value.replace(/&#x22;/g, &#x27;&#x22;&#x22;&#x27;) + &#x27;&#x22;&#x27; : &#x27;*&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var raw = this.unwrapRaw(value);
  if (raw) return raw;
  if (typeof value === &#x27;number&#x27;) return value;
  return this._wrapString(value + &#x27;&#x27;);
};

Formatter.prototype.wrapAsIdentifier = function wrapAsIdentifier(value) {
  return this.client.<span class="apidocCodeKeywordSpan">wrapIdentifier</span>((value || &#x27;&#x27;).trim());
};

Formatter.prototype.alias = function alias(first, second) {
  return first + &#x27; as &#x27; + second;
};

// The operator method takes a value and returns something or other.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.formatter" id="apidoc.module.knex.formatter">module knex.formatter</a></h1>


    <h2>
        <a href="#apidoc.element.knex.formatter.formatter" id="apidoc.element.knex.formatter.formatter">
        function <span class="apidocSignatureSpan">knex.</span>formatter
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Formatter(client) {
  (0, _classCallCheck3.default)(this, Formatter);

  this.client = client;
  this.bindings = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return this.toQuery();
  },


  // Returns the raw sql for the query.
  toSQL: function toSQL(method, tz) {
var obj = void 0;
var formatter = this.client.<span class="apidocCodeKeywordSpan">formatter</span>();

if (Array.isArray(this.bindings)) {
  obj = replaceRawArrBindings(this, formatter);
} else if (this.bindings &#x26;&#x26; (0, _isPlainObject3.default)(this.bindings)) {
  obj = replaceKeyBindings(this, formatter);
} else {
  obj = {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.formatter.prototype" id="apidoc.module.knex.formatter.prototype">module knex.formatter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.formatter.prototype._wrapString" id="apidoc.element.knex.formatter.prototype._wrapString">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>_wrapString
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _wrapString(value) {
  var asIndex = value.toLowerCase().indexOf(&#x27; as &#x27;);
  if (asIndex !== -1) {
    var first = value.slice(0, asIndex);
    var second = value.slice(asIndex + 4);
    return this.alias(this.wrap(first), this.wrapAsIdentifier(second));
  }
  var wrapped = [];
  var i = -1;
  var segments = value.split(&#x27;.&#x27;);
  while (++i &#x3c; segments.length) {
    value = segments[i];
    if (i === 0 &#x26;&#x26; segments.length &#x3e; 1) {
      wrapped.push(this.wrap((value || &#x27;&#x27;).trim()));
    } else {
      wrapped.push(this.client.wrapIdentifier((value || &#x27;&#x27;).trim()));
    }
  }
  return wrapped.join(&#x27;.&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Formatter.prototype.wrap = function wrap(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.compileCallback(value), true);
  }
  var raw = this.unwrapRaw(value);
  if (raw) return raw;
  if (typeof value === &#x27;number&#x27;) return value;
  return this.<span class="apidocCodeKeywordSpan">_wrapString</span>(value + &#x27;&#x27;);
};

Formatter.prototype.wrapAsIdentifier = function wrapAsIdentifier(value) {
  return this.client.wrapIdentifier((value || &#x27;&#x27;).trim());
};

Formatter.prototype.alias = function alias(first, second) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.alias" id="apidoc.element.knex.formatter.prototype.alias">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>alias
        <span class="apidocSignatureSpan">(first, second)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function alias(first, second) {
  return first + &#x27; as &#x27; + second;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


Formatter.prototype.outputQuery = function outputQuery(compiled, isParameter) {
  var sql = compiled.sql || &#x27;&#x27;;
  if (sql) {
    if ((compiled.method === &#x27;select&#x27; || compiled.method === &#x27;first&#x27;) &#x26;&#x26; (isParameter || compiled.
as)) {
      sql = &#x27;(&#x27; + sql + &#x27;)&#x27;;
      if (compiled.as) return this.<span class="apidocCodeKeywordSpan">alias</span>(sql, this.wrap(compiled.as));
    }
  }
  return sql;
};

// Coerce to string to prevent strange errors when it&#x27;s not a string.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.columnize" id="apidoc.element.knex.formatter.prototype.columnize">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>columnize
        <span class="apidocSignatureSpan">(target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function columnize(target) {
  var columns = typeof target === &#x27;string&#x27; ? [target] : target;
  var str = &#x27;&#x27;,
      i = -1;
  while (++i &#x3c; columns.length) {
    if (i &#x3e; 0) str += &#x27;, &#x27;;
    str += this.wrap(columns[i]);
  }
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (match === &#x27;\\?&#x27;) {
    return match;
  }

  var value = values[index++];

  if (match === &#x27;??&#x27;) {
    return formatter.<span class="apidocCodeKeywordSpan">columnize</span>(value);
  }
  return formatter.parameter(value);
});

if (expectedBindings !== index) {
  throw new Error(&#x27;Expected &#x27; + expectedBindings + &#x27; bindings, saw &#x27; + index);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.compileCallback" id="apidoc.element.knex.formatter.prototype.compileCallback">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>compileCallback
        <span class="apidocSignatureSpan">(callback, method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function compileCallback(callback, method) {
  var client = this.client;

  // Build the callback

  var builder = client.queryBuilder();
  callback.call(builder, builder);

  // Compile the callback, using the current formatter (to track all bindings).
  var compiler = client.queryCompiler(builder);
  compiler.formatter = this;

  // Return the compiled &#x26; parameterized sql.
  return compiler.toSQL(method || &#x27;select&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Checks whether a value is a function... if it is, we compile it
// otherwise we check whether it&#x27;s a raw


Formatter.prototype.parameter = function parameter(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.<span class="apidocCodeKeywordSpan">compileCallback</span>(value), true);
  }
  return this.unwrapRaw(value, true) || &#x27;?&#x27;;
};

Formatter.prototype.unwrapRaw = function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.direction" id="apidoc.element.knex.formatter.prototype.direction">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>direction
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function direction(value) {
  var raw = this.unwrapRaw(value);
  if (raw) return raw;
  return orderBys.indexOf((value || &#x27;&#x27;).toLowerCase()) !== -1 ? value : &#x27;asc&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.operator" id="apidoc.element.knex.formatter.prototype.operator">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>operator
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function operator(value) {
  var raw = this.unwrapRaw(value);
  if (raw) return raw;
  if (operators[(value || &#x27;&#x27;).toLowerCase()] !== true) {
    throw new TypeError(&#x27;The operator &#x22;&#x27; + value + &#x27;&#x22; is not permitted&#x27;);
  }
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.outputQuery" id="apidoc.element.knex.formatter.prototype.outputQuery">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>outputQuery
        <span class="apidocSignatureSpan">(compiled, isParameter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function outputQuery(compiled, isParameter) {
  var sql = compiled.sql || &#x27;&#x27;;
  if (sql) {
    if ((compiled.method === &#x27;select&#x27; || compiled.method === &#x27;first&#x27;) &#x26;&#x26; (isParameter || compiled.as)) {
      sql = &#x27;(&#x27; + sql + &#x27;)&#x27;;
      if (compiled.as) return this.alias(sql, this.wrap(compiled.as));
    }
  }
  return sql;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Checks whether a value is a function... if it is, we compile it
// otherwise we check whether it&#x27;s a raw


Formatter.prototype.parameter = function parameter(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.<span class="apidocCodeKeywordSpan">outputQuery</span>(this.compileCallback(value), true);
  }
  return this.unwrapRaw(value, true) || &#x27;?&#x27;;
};

Formatter.prototype.unwrapRaw = function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.parameter" id="apidoc.element.knex.formatter.prototype.parameter">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>parameter
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parameter(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.compileCallback(value), true);
  }
  return this.unwrapRaw(value, true) || &#x27;?&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

// Turns a list of values into a list of ?&#x27;s, joining them with commas unless
// a &#x22;joining&#x22; value is specified (e.g. &#x27; and &#x27;)


Formatter.prototype.parameterize = function parameterize(values, notSetValue) {
  if (typeof values === &#x27;function&#x27;) return this.<span class="apidocCodeKeywordSpan">parameter</span>(values);
  values = Array.isArray(values) ? values : [values];
  var str = &#x27;&#x27;,
      i = -1;
  while (++i &#x3c; values.length) {
    if (i &#x3e; 0) str += &#x27;, &#x27;;
    str += this.parameter(values[i] === undefined ? notSetValue : values[i]);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.parameterize" id="apidoc.element.knex.formatter.prototype.parameterize">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>parameterize
        <span class="apidocSignatureSpan">(values, notSetValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parameterize(values, notSetValue) {
  if (typeof values === &#x27;function&#x27;) return this.parameter(values);
  values = Array.isArray(values) ? values : [values];
  var str = &#x27;&#x27;,
      i = -1;
  while (++i &#x3c; values.length) {
    if (i &#x3e; 0) str += &#x27;, &#x27;;
    str += this.parameter(values[i] === undefined ? notSetValue : values[i]);
  }
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.rawOrFn" id="apidoc.element.knex.formatter.prototype.rawOrFn">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>rawOrFn
        <span class="apidocSignatureSpan">(value, method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rawOrFn(value, method) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.compileCallback(value, method));
  }
  return this.unwrapRaw(value) || &#x27;&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.unwrapRaw" id="apidoc.element.knex.formatter.prototype.unwrapRaw">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>unwrapRaw
        <span class="apidocSignatureSpan">(value, isParameter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
    query = this.client.queryCompiler(value).toSQL();
    if (query.bindings) {
      this.bindings = this.bindings.concat(query.bindings);
    }
    return this.outputQuery(query, isParameter);
  }
  if (value instanceof _raw2.default) {
    value.client = this.client;
    query = value.toSQL();
    if (query.bindings) {
      this.bindings = this.bindings.concat(query.bindings);
    }
    return query.sql;
  }
  if (isParameter) {
    this.bindings.push(value);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// otherwise we check whether it&#x27;s a raw


Formatter.prototype.parameter = function parameter(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.compileCallback(value), true);
  }
  return this.<span class="apidocCodeKeywordSpan">unwrapRaw</span>(value, true) || &#x27;?&#x27;;
};

Formatter.prototype.unwrapRaw = function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
    query = this.client.queryCompiler(value).toSQL();
    if (query.bindings) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.wrap" id="apidoc.element.knex.formatter.prototype.wrap">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>wrap
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function wrap(value) {
  if (typeof value === &#x27;function&#x27;) {
    return this.outputQuery(this.compileCallback(value), true);
  }
  var raw = this.unwrapRaw(value);
  if (raw) return raw;
  if (typeof value === &#x27;number&#x27;) return value;
  return this._wrapString(value + &#x27;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Formatter.prototype.columnize = function columnize(target) {
  var columns = typeof target === &#x27;string&#x27; ? [target] : target;
  var str = &#x27;&#x27;,
      i = -1;
  while (++i &#x3c; columns.length) {
    if (i &#x3e; 0) str += &#x27;, &#x27;;
    str += this.<span class="apidocCodeKeywordSpan">wrap</span>(columns[i]);
  }
  return str;
};

// Turns a list of values into a list of ?&#x27;s, joining them with commas unless
// a &#x22;joining&#x22; value is specified (e.g. &#x27; and &#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.formatter.prototype.wrapAsIdentifier" id="apidoc.element.knex.formatter.prototype.wrapAsIdentifier">
        function <span class="apidocSignatureSpan">knex.formatter.prototype.</span>wrapAsIdentifier
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function wrapAsIdentifier(value) {
  return this.client.wrapIdentifier((value || &#x27;&#x27;).trim());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


  Formatter.prototype._wrapString = function _wrapString(value) {
var asIndex = value.toLowerCase().indexOf(&#x27; as &#x27;);
if (asIndex !== -1) {
  var first = value.slice(0, asIndex);
  var second = value.slice(asIndex + 4);
  return this.alias(this.wrap(first), this.<span class="apidocCodeKeywordSpan">wrapAsIdentifier</span>(second));
}
var wrapped = [];
var i = -1;
var segments = value.split(&#x27;.&#x27;);
while (++i &#x3c; segments.length) {
  value = segments[i];
  if (i === 0 &#x26;&#x26; segments.length &#x3e; 1) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.functionhelper" id="apidoc.module.knex.functionhelper">module knex.functionhelper</a></h1>


    <h2>
        <a href="#apidoc.element.knex.functionhelper.functionhelper" id="apidoc.element.knex.functionhelper.functionhelper">
        function <span class="apidocSignatureSpan">knex.</span>functionhelper
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FunctionHelper(client) {
  this.client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.functionhelper.prototype" id="apidoc.module.knex.functionhelper.prototype">module knex.functionhelper.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.functionhelper.prototype.now" id="apidoc.element.knex.functionhelper.prototype.now">
        function <span class="apidocSignatureSpan">knex.functionhelper.prototype.</span>now
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">now = function () {
  return this.client.raw(&#x27;CURRENT_TIMESTAMP&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.helpers" id="apidoc.module.knex.helpers">module knex.helpers</a></h1>




    <h2>
        <a href="#apidoc.element.knex.helpers.containsUndefined" id="apidoc.element.knex.helpers.containsUndefined">
        function <span class="apidocSignatureSpan">knex.helpers.</span>containsUndefined
        <span class="apidocSignatureSpan">(mixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function containsUndefined(mixed) {
  var argContainsUndefined = false;

  if ((0, _isTypedArray3.default)(mixed)) return false;

  if (mixed &#x26;&#x26; (0, _isFunction3.default)(mixed.toSQL)) {
    //Any QueryBuilder or Raw will automatically be validated during compile.
    return argContainsUndefined;
  }

  if ((0, _isArray3.default)(mixed)) {
    for (var i = 0; i &#x3c; mixed.length; i++) {
      if (argContainsUndefined) break;
      argContainsUndefined = this.containsUndefined(mixed[i]);
    }
  } else if ((0, _isObject3.default)(mixed)) {
    for (var key in mixed) {
      if (argContainsUndefined) break;
      argContainsUndefined = this.containsUndefined(mixed[key]);
    }
  } else {
    argContainsUndefined = (0, _isUndefined3.default)(mixed);
  }

  return argContainsUndefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //Any QueryBuilder or Raw will automatically be validated during compile.
  return argContainsUndefined;
}

if ((0, _isArray3.default)(mixed)) {
  for (var i = 0; i &#x3c; mixed.length; i++) {
    if (argContainsUndefined) break;
    argContainsUndefined = this.<span class="apidocCodeKeywordSpan">containsUndefined</span>(mixed[i]);
  }
} else if ((0, _isObject3.default)(mixed)) {
  for (var key in mixed) {
    if (argContainsUndefined) break;
    argContainsUndefined = this.containsUndefined(mixed[key]);
  }
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.debugLog" id="apidoc.element.knex.helpers.debugLog">
        function <span class="apidocSignatureSpan">knex.helpers.</span>debugLog
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function debugLog(msg) {
  console.log(msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  runner.connection = connection;

  runner.client.emit(&#x27;start&#x27;, runner.builder);
  runner.builder.emit(&#x27;start&#x27;, runner.builder);
  var sql = runner.builder.toSQL();

  if (runner.builder._debug) {
    helpers.<span class="apidocCodeKeywordSpan">debugLog</span>(sql);
  }

  if ((0, _isArray3.default)(sql)) {
    return runner.queryArray(sql);
  }
  return runner.query(sql);
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.deprecate" id="apidoc.element.knex.helpers.deprecate">
        function <span class="apidocSignatureSpan">knex.helpers.</span>deprecate
        <span class="apidocSignatureSpan">(method, alternate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deprecate(method, alternate) {
  warn(method + &#x27; is deprecated, please use &#x27; + alternate);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.error" id="apidoc.element.knex.helpers.error">
        function <span class="apidocSignatureSpan">knex.helpers.</span>error
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function error(msg) {
  console.log(_chalk2.default.red(&#x27;Knex:Error &#x27; + msg));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// .map over the results
.map(function(row) {
  console.log(row);
})

// Finally, add a .catch handler for the promise chain
.catch(function(e) {
  console.<span class="apidocCodeKeywordSpan">error</span>(e);
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.exit" id="apidoc.element.knex.helpers.exit">
        function <span class="apidocSignatureSpan">knex.helpers.</span>exit
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function exit(msg) {
  console.log(_chalk2.default.red(msg));
  process.exit(1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Used to warn about incorrect use, without error&#x27;ing
function warn(msg) {
console.log(_chalk2.default.yellow(&#x27;Knex:warning - &#x27; + msg));
}

function exit(msg) {
console.log(_chalk2.default.red(msg));
process.<span class="apidocCodeKeywordSpan">exit</span>(1);
}

function containsUndefined(mixed) {
var argContainsUndefined = false;

if ((0, _isTypedArray3.default)(mixed)) return false;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.normalizeArr" id="apidoc.element.knex.helpers.normalizeArr">
        function <span class="apidocSignatureSpan">knex.helpers.</span>normalizeArr
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeArr() {
  var args = new Array(arguments.length);
  for (var i = 0; i &#x3c; args.length; i++) {
    args[i] = arguments[i];
  }
  if (Array.isArray(args[0])) {
    return args[0];
  }
  return args;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.skim" id="apidoc.element.knex.helpers.skim">
        function <span class="apidocSignatureSpan">knex.helpers.</span>skim
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function skim(data) {
  return (0, _map3.default)(data, function (obj) {
    return (0, _pick3.default)(obj, (0, _keys3.default)(obj));
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.helpers.warn" id="apidoc.element.knex.helpers.warn">
        function <span class="apidocSignatureSpan">knex.helpers.</span>warn
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function warn(msg) {
  console.log(_chalk2.default.yellow(&#x27;Knex:warning - &#x27; + msg));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return this;
};

// Set the transaction object for this query.
Target.prototype.transacting = function (t) {
  if (t &#x26;&#x26; t.client) {
    if (!t.client.transacting) {
      helpers.<span class="apidocCodeKeywordSpan">warn</span>(&#x27;Invalid transaction value: &#x27; + t.client);
    } else {
      this.client = t.client;
    }
  }
  return this;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.migrate" id="apidoc.module.knex.migrate">module knex.migrate</a></h1>


    <h2>
        <a href="#apidoc.element.knex.migrate.migrate" id="apidoc.element.knex.migrate.migrate">
        function <span class="apidocSignatureSpan">knex.</span>migrate
        <span class="apidocSignatureSpan">(knex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Migrator(knex) {
  (0, _classCallCheck3.default)(this, Migrator);

  this.knex = knex;
  this.config = this.setConfig(knex.client.config.migrations);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.migrate.prototype" id="apidoc.module.knex.migrate.prototype">module knex.migrate.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._absoluteConfigDir" id="apidoc.element.knex.migrate.prototype._absoluteConfigDir">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_absoluteConfigDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _absoluteConfigDir() {
  return _path2.default.resolve(process.cwd(), this.config.directory);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._createMigrationLockTable" id="apidoc.element.knex.migrate.prototype._createMigrationLockTable">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_createMigrationLockTable
        <span class="apidocSignatureSpan">(tableName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _createMigrationLockTable(tableName) {
  return this.knex.schema.createTableIfNotExists(tableName, function (t) {
    t.integer(&#x27;is_locked&#x27;);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._createMigrationTable" id="apidoc.element.knex.migrate.prototype._createMigrationTable">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_createMigrationTable
        <span class="apidocSignatureSpan">(tableName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _createMigrationTable(tableName) {
  return this.knex.schema.createTableIfNotExists(tableName, function (t) {
    t.increments();
    t.string(&#x27;name&#x27;);
    t.integer(&#x27;batch&#x27;);
    t.timestamp(&#x27;migration_time&#x27;);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._ensureFolder" id="apidoc.element.knex.migrate.prototype._ensureFolder">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_ensureFolder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _ensureFolder() {
  var dir = this._absoluteConfigDir();
  return _bluebird2.default.promisify(_fs2.default.stat, { context: _fs2.default })(dir).catch(function () {
    return _bluebird2.default.promisify(_mkdirp2.default)(dir);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._ensureTable" id="apidoc.element.knex.migrate.prototype._ensureTable">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_ensureTable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _ensureTable() {
  var _this5 = this;

  var table = this.config.tableName;
  var lockTable = this._getLockTableName();
  return this.knex.schema.hasTable(table).then(function (exists) {
    return !exists &#x26;&#x26; _this5._createMigrationTable(table);
  }).then(function () {
    return _this5.knex.schema.hasTable(lockTable);
  }).then(function (exists) {
    return !exists &#x26;&#x26; _this5._createMigrationLockTable(lockTable);
  }).then(function () {
    return _this5.knex(lockTable).select(&#x27;*&#x27;);
  }).then(function (data) {
    return !data.length &#x26;&#x26; _this5.knex(lockTable).insert({ is_locked: 0 });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._freeLock" id="apidoc.element.knex.migrate.prototype._freeLock">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_freeLock
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _freeLock() {
  var tableName = this._getLockTableName();
  return this.knex(tableName).update({ is_locked: 0 });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._generateStubTemplate" id="apidoc.element.knex.migrate.prototype._generateStubTemplate">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_generateStubTemplate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _generateStubTemplate() {
  var stubPath = this.config.stub || _path2.default.join(__dirname, &#x27;stub&#x27;, this.config.extension + &#x27;.stub&#x27;);
  return _bluebird2.default.promisify(_fs2.default.readFile, { context: _fs2.default })(stubPath).then(function (stub) {
    return (0, _template3.default)(stub.toString(), { variable: &#x27;d&#x27; });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._getLastBatch" id="apidoc.element.knex.migrate.prototype._getLastBatch">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLastBatch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getLastBatch() {
  var tableName = this.config.tableName;

  return this.knex(tableName).where(&#x27;batch&#x27;, function (qb) {
    qb.max(&#x27;batch&#x27;).from(tableName);
  }).orderBy(&#x27;id&#x27;, &#x27;desc&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._getLock" id="apidoc.element.knex.migrate.prototype._getLock">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLock
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getLock() {
  var _this6 = this;

  return this.knex.transaction(function (trx) {
    return _this6._isLocked(trx).then(function (isLocked) {
      if (isLocked) {
        throw new Error(&#x22;Migration table is already locked&#x22;);
      }
    }).then(function () {
      return _this6._lockMigrations(trx);
    });
  }).catch(function (err) {
    throw new LockError(err.message);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._getLockTableName" id="apidoc.element.knex.migrate.prototype._getLockTableName">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_getLockTableName
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getLockTableName() {
  return this.config.tableName + &#x27;_lock&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._isLocked" id="apidoc.element.knex.migrate.prototype._isLocked">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_isLocked
        <span class="apidocSignatureSpan">(trx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _isLocked(trx) {
  var tableName = this._getLockTableName();
  return this.knex(tableName).transacting(trx).forUpdate().select(&#x27;*&#x27;).then(function (data) {
    return data[0].is_locked;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._latestBatchNumber" id="apidoc.element.knex.migrate.prototype._latestBatchNumber">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_latestBatchNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _latestBatchNumber() {
  return this.knex(this.config.tableName).max(&#x27;batch as max_batch&#x27;).then(function (obj) {
    return obj[0].max_batch || 0;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._listAll" id="apidoc.element.knex.migrate.prototype._listAll">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_listAll
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _listAll(config) {
  this.config = this.setConfig(config);
  return _bluebird2.default.promisify(_fs2.default.readdir, { context: _fs2.default })(this._absoluteConfigDir()).then(function (
migrations) {
    return (0, _filter3.default)(migrations, function (value) {
      var extension = _path2.default.extname(value);
      return (0, _includes3.default)(SUPPORTED_EXTENSIONS, extension);
    }).sort();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._listCompleted" id="apidoc.element.knex.migrate.prototype._listCompleted">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_listCompleted
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _listCompleted() {
  var _this8 = this;

  var tableName = this.config.tableName;

  return this._ensureTable(tableName).then(function () {
    return _this8.knex(tableName).orderBy(&#x27;id&#x27;).select(&#x27;name&#x27;);
  }).then(function (migrations) {
    return (0, _map3.default)(migrations, &#x27;name&#x27;);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._lockMigrations" id="apidoc.element.knex.migrate.prototype._lockMigrations">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_lockMigrations
        <span class="apidocSignatureSpan">(trx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _lockMigrations(trx) {
  var tableName = this._getLockTableName();
  return this.knex(tableName).transacting(trx).update({ is_locked: 1 });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._migrationData" id="apidoc.element.knex.migrate.prototype._migrationData">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_migrationData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _migrationData() {
  return _bluebird2.default.all([this._listAll(), this._listCompleted()]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._runBatch" id="apidoc.element.knex.migrate.prototype._runBatch">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_runBatch
        <span class="apidocSignatureSpan">(migrations, direction)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _runBatch(migrations, direction) {
  var _this7 = this;

  return this._getLock().then(function () {
    return _bluebird2.default.all((0, _map3.default)(migrations, (0, _bind3.default)(_this7._validateMigrationStructure, _this7)));
  }).then(function () {
    return _this7._latestBatchNumber();
  }).then(function (batchNo) {
    if (direction === &#x27;up&#x27;) batchNo++;
    return batchNo;
  }).then(function (batchNo) {
    return _this7._waterfallBatch(batchNo, migrations, direction);
  }).tap(function () {
    return _this7._freeLock();
  }).catch(function (error) {
    var cleanupReady = _bluebird2.default.resolve();

    if (error instanceof LockError) {
      // If locking error do not free the lock.
      helpers.warn(&#x27;Can\&#x27;t take lock to run migrations: &#x27; + error.message);
      helpers.warn(&#x27;If you are sure migrations are not running you can release the &#x27; + &#x27;lock manually by deleting all the rows from
 migrations lock &#x27; + &#x27;table: &#x27; + _this7._getLockTableName());
    } else {
      helpers.warn(&#x27;migrations failed with error: &#x27; + error.message);
      // If the error was not due to a locking issue, then remove the lock.
      cleanupReady = _this7._freeLock();
    }

    return cleanupReady.finally(function () {
      throw error;
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._transaction" id="apidoc.element.knex.migrate.prototype._transaction">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_transaction
        <span class="apidocSignatureSpan">(migration, direction, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _transaction(migration, direction, name) {
  return this.knex.transaction(function (trx) {
    return warnPromise(migration[direction](trx, _bluebird2.default), name, function () {
      trx.commit();
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._useTransaction" id="apidoc.element.knex.migrate.prototype._useTransaction">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_useTransaction
        <span class="apidocSignatureSpan">(migration, allTransactionsDisabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _useTransaction(migration, allTransactionsDisabled) {
  var singleTransactionValue = (0, _get3.default)(migration, &#x27;config.transaction&#x27;);

  return (0, _isBoolean3.default)(singleTransactionValue) ? singleTransactionValue : !allTransactionsDisabled;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._validateMigrationStructure" id="apidoc.element.knex.migrate.prototype._validateMigrationStructure">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_validateMigrationStructure
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _validateMigrationStructure(name) {
  var migration = require(_path2.default.join(this._absoluteConfigDir(), name));
  if (typeof migration.up !== &#x27;function&#x27; || typeof migration.down !== &#x27;function&#x27;) {
    throw new Error(&#x27;Invalid migration: &#x27; + name + &#x27; must have both an up and down function&#x27;);
  }
  return name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._waterfallBatch" id="apidoc.element.knex.migrate.prototype._waterfallBatch">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_waterfallBatch
        <span class="apidocSignatureSpan">(batchNo, migrations, direction)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _waterfallBatch(batchNo, migrations, direction) {
  var _this9 = this;

  var knex = this.knex;
  var _config = this.config;
  var tableName = _config.tableName;
  var disableTransactions = _config.disableTransactions;

  var directory = this._absoluteConfigDir();
  var current = _bluebird2.default.bind({ failed: false, failedOn: 0 });
  var log = [];
  (0, _each3.default)(migrations, function (migration) {
    var name = migration;
    migration = require(directory + &#x27;/&#x27; + name);

    // We&#x27;re going to run each of the migrations in the current &#x22;up&#x22;.
    current = current.then(function () {
      if (_this9._useTransaction(migration, disableTransactions)) {
        return _this9._transaction(migration, direction, name);
      }
      return warnPromise(migration[direction](knex, _bluebird2.default), name);
    }).then(function () {
      log.push(_path2.default.join(directory, name));
      if (direction === &#x27;up&#x27;) {
        return knex(tableName).insert({
          name: name,
          batch: batchNo,
          migration_time: new Date()
        });
      }
      if (direction === &#x27;down&#x27;) {
        return knex(tableName).where({ name: name }).del();
      }
    });
  });

  return current.thenReturn([batchNo, log]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype._writeNewMigration" id="apidoc.element.knex.migrate.prototype._writeNewMigration">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>_writeNewMigration
        <span class="apidocSignatureSpan">(name, tmpl)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _writeNewMigration(name, tmpl) {
  var config = this.config;

  var dir = this._absoluteConfigDir();
  if (name[0] === &#x27;-&#x27;) name = name.slice(1);
  var filename = yyyymmddhhmmss() + &#x27;_&#x27; + name + &#x27;.&#x27; + config.extension;
  return _bluebird2.default.promisify(_fs2.default.writeFile, { context: _fs2.default })(_path2.default.join(dir, filename), tmpl
(config.variables || {})).return(_path2.default.join(dir, filename));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.currentVersion" id="apidoc.element.knex.migrate.prototype.currentVersion">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>currentVersion
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function currentVersion(config) {
  this.config = this.setConfig(config);
  return this._listCompleted(config).then(function (completed) {
    var val = (0, _max3.default)((0, _map3.default)(completed, function (value) {
      return value.split(&#x27;_&#x27;)[0];
    }));
    return (0, _isUndefined3.default)(val) ? &#x27;none&#x27; : val;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.forceFreeMigrationsLock" id="apidoc.element.knex.migrate.prototype.forceFreeMigrationsLock">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>forceFreeMigrationsLock
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function forceFreeMigrationsLock(config) {
  var _this3 = this;

  this.config = this.setConfig(config);
  var lockTable = this._getLockTableName();
  return this.knex.schema.hasTable(lockTable).then(function (exist) {
    return exist &#x26;&#x26; _this3._freeLock();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.latest" id="apidoc.element.knex.migrate.prototype.latest">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>latest
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function latest(config) {
  var _this = this;

  this.config = this.setConfig(config);
  return this._migrationData().tap(validateMigrationList).spread(function (all, completed) {
    return _this._runBatch((0, _difference3.default)(all, completed), &#x27;up&#x27;);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.make" id="apidoc.element.knex.migrate.prototype.make">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>make
        <span class="apidocSignatureSpan">(name, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function make(name, config) {
  var _this4 = this;

  this.config = this.setConfig(config);
  if (!name) {
    return _bluebird2.default.reject(new Error(&#x27;A name must be specified for the generated migration&#x27;));
  }

  return this._ensureFolder(config).then(function (val) {
    return _this4._generateStubTemplate(val);
  }).then(function (val) {
    return _this4._writeNewMigration(name, val);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.rollback" id="apidoc.element.knex.migrate.prototype.rollback">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>rollback
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollback(config) {
  var _this2 = this;

  return _bluebird2.default.try(function () {
    _this2.config = _this2.setConfig(config);
    return _this2._migrationData().tap(validateMigrationList).then(function (val) {
      return _this2._getLastBatch(val);
    }).then(function (migrations) {
      return _this2._runBatch((0, _map3.default)(migrations, &#x27;name&#x27;), &#x27;down&#x27;);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  } catch (err) {
    result = _bluebird2.default.reject(err);
  }
  if (result &#x26;&#x26; result.then &#x26;&#x26; typeof result.then === &#x27;function&#x27;) {
    result.then(function (val) {
      return transactor.commit(val);
    }).catch(function (err) {
      return transactor.<span class="apidocCodeKeywordSpan">rollback</span>(err);
    });
  }
  return null;
}).catch(function (e) {
  return _this._rejecter(e);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.setConfig" id="apidoc.element.knex.migrate.prototype.setConfig">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>setConfig
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setConfig(config) {
  return (0, _assign3.default)({}, CONFIG_DEFAULT, this.config || {}, config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.migrate.prototype.status" id="apidoc.element.knex.migrate.prototype.status">
        function <span class="apidocSignatureSpan">knex.migrate.prototype.</span>status
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function status(config) {
  this.config = this.setConfig(config);

  return _bluebird2.default.all([this.knex(this.config.tableName).select(&#x27;*&#x27;), this._listAll()]).spread(function (db, code) {
    return db.length - code.length;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.raw" id="apidoc.module.knex.raw">module knex.raw</a></h1>


    <h2>
        <a href="#apidoc.element.knex.raw.raw" id="apidoc.element.knex.raw.raw">
        function <span class="apidocSignatureSpan">knex.</span>raw
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Raw() {
  var client = arguments.length &#x3c;= 0 || arguments[0] === undefined ? fakeClient : arguments[0];

  this.client = client;

  this.sql = &#x27;&#x27;;
  this.bindings = [];

  // Todo: Deprecate
  this._wrappedBefore = undefined;
  this._wrappedAfter = undefined;
  this._debug = client &#x26;&#x26; client.config &#x26;&#x26; client.config.debug;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// FunctionHelper
// -------
function FunctionHelper(client) {
  this.client = client;
}

FunctionHelper.prototype.now = function () {
  return this.client.<span class="apidocCodeKeywordSpan">raw</span>(&#x27;CURRENT_TIMESTAMP&#x27;);
};

exports.default = FunctionHelper;
module.exports = exports[&#x27;default&#x27;];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.super_" id="apidoc.element.knex.raw.super_">
        function <span class="apidocSignatureSpan">knex.raw.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.raw.prototype" id="apidoc.module.knex.raw.prototype">module knex.raw.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.raw.prototype.asCallback" id="apidoc.element.knex.raw.prototype.asCallback">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>asCallback
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">asCallback = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.bind" id="apidoc.element.knex.raw.prototype.bind">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>bind
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bind = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.<span class="apidocCodeKeywordSpan">bind</span>(this
).return(queries).reduce(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.catch" id="apidoc.element.knex.raw.prototype.catch">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>catch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">catch = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// .map over the results
.map(function(row) {
  console.log(row);
})

// Finally, add a .catch handler for the promise chain
.<span class="apidocCodeKeywordSpan">catch</span>(function(e) {
  console.error(e);
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.connection" id="apidoc.element.knex.raw.prototype.connection">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>connection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connection = function (connection) {
  this._connection = connection;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.debug" id="apidoc.element.knex.raw.prototype.debug">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>debug
        <span class="apidocSignatureSpan">(enabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (enabled) {
  this._debug = arguments.length ? enabled : true;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.delay" id="apidoc.element.knex.raw.prototype.delay">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>delay
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delay = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.ensure" id="apidoc.element.knex.raw.prototype.ensure">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>ensure
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ensure = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.finally" id="apidoc.element.knex.raw.prototype.finally">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>finally
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">finally = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.get" id="apidoc.element.knex.raw.prototype.get">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.map" id="apidoc.element.knex.raw.prototype.map">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>map
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.then(function() {
  return knex(&#x27;users&#x27;)
    .join(&#x27;accounts&#x27;, &#x27;users.id&#x27;, &#x27;accounts.user_id&#x27;)
    .select(&#x27;users.user_name as user&#x27;, &#x27;accounts.account_name as account&#x27;);
})

// .map over the results
.<span class="apidocCodeKeywordSpan">map</span>(function(row) {
  console.log(row);
})

// Finally, add a .catch handler for the promise chain
.catch(function(e) {
  console.error(e);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.mapSeries" id="apidoc.element.knex.raw.prototype.mapSeries">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>mapSeries
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mapSeries = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.options" id="apidoc.element.knex.raw.prototype.options">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>options
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">options = function (opts) {
  this._options = this._options || [];
  this._options.push((0, _clone3.default)(opts) || {});
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.pipe" id="apidoc.element.knex.raw.prototype.pipe">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>pipe
        <span class="apidocSignatureSpan">(writable, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pipe = function (writable, options) {
  return this.client.runner(this).pipe(writable, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Initializes a stream.
Target.prototype.stream = function (options) {
  return this.client.runner(this).stream(options);
};

// Initialize a stream &#x26; pipe automatically.
Target.prototype.pipe = function (writable, options) {
  return this.client.runner(this).<span class="apidocCodeKeywordSpan">pipe</span>(writable, options);
};

// Creates a method which &#x22;coerces&#x22; to a promise, by calling a
// &#x22;then&#x22; method on the current `Target`
(0, _each3.default)([&#x27;bind&#x27;, &#x27;catch&#x27;, &#x27;finally&#x27;, &#x27;asCallback&#x27;, &#x27;spread&#x27;, &#x27
;map&#x27;, &#x27;reduce&#x27;, &#x27;tap&#x27;, &#x27;thenReturn&#x27;, &#x27;return&#x27;, &#x27;yield&#x27;, &#x27;ensure&#x27
;, &#x27;reflect&#x27;, &#x27;get&#x27;, &#x27;mapSeries&#x27;, &#x27;delay&#x27;], function (method) {
  Target.prototype[method] = function () {
    var promise = this.then();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.reduce" id="apidoc.element.knex.raw.prototype.reduce">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>reduce
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduce = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.bind(this).return(queries).<span class="apidocCodeKeywordSpan
">reduce</span>(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.reflect" id="apidoc.element.knex.raw.prototype.reflect">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>reflect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reflect = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.return" id="apidoc.element.knex.raw.prototype.return">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>return
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">return = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.bind(this).<span class="apidocCodeKeywordSpan">return
</span>(queries).reduce(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.set" id="apidoc.element.knex.raw.prototype.set">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>set
        <span class="apidocSignatureSpan">(sql, bindings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function set(sql, bindings) {
  this.sql = sql;
  this.bindings = (0, _isObject3.default)(bindings) &#x26;&#x26; !bindings.toSQL || (0, _isUndefined3.default)(bindings) ? bindings : [bindings
];

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.spread" id="apidoc.element.knex.raw.prototype.spread">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>spread
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spread = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.stream" id="apidoc.element.knex.raw.prototype.stream">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>stream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stream = function (options) {
  return this.client.runner(this).stream(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  }
  return this;
};

// Initializes a stream.
Target.prototype.stream = function (options) {
  return this.client.runner(this).<span class="apidocCodeKeywordSpan">stream</span>(options);
};

// Initialize a stream &#x26; pipe automatically.
Target.prototype.pipe = function (writable, options) {
  return this.client.runner(this).pipe(writable, options);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.tap" id="apidoc.element.knex.raw.prototype.tap">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>tap
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tap = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      runner.builder.emit(&#x27;error&#x27;, err);
    }
    throw err;
  })

  // Fire a single &#x22;end&#x22; event on the builder when
  // all queries have successfully completed.
  .<span class="apidocCodeKeywordSpan">tap</span>(function () {
    runner.builder.emit(&#x27;end&#x27;);
  });
},


// Stream the result set, by passing through to the dialect&#x27;s streaming
// capabilities. If the options are
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.then" id="apidoc.element.knex.raw.prototype.then">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>then
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">then = function () /* onFulfilled, onRejected */{
  var result = this.client.runner(this).run();
  return result.then.apply(result, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.createTable(&#x27;accounts&#x27;, function(table) {
  table.increments(&#x27;id&#x27;);
  table.string(&#x27;account_name&#x27;);
  table.integer(&#x27;user_id&#x27;).unsigned().references(&#x27;users.id&#x27;);
})

// Then query the table...
.<span class="apidocCodeKeywordSpan">then</span>(function() {
  return knex.insert({user_name: &#x27;Tim&#x27;}).into(&#x27;users&#x27;);
})

// ...and using the insert id, insert into the other table.
.then(function(rows) {
  return knex.table(&#x27;accounts&#x27;).insert({account_name: &#x27;knex&#x27;, user_id: rows[0]});
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.thenReturn" id="apidoc.element.knex.raw.prototype.thenReturn">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>thenReturn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">thenReturn = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.timeout" id="apidoc.element.knex.raw.prototype.timeout">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>timeout
        <span class="apidocSignatureSpan">(ms)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function timeout(ms) {
  var _ref = arguments.length &#x3c;= 1 || arguments[1] === undefined ? {} : arguments[1];

  var cancel = _ref.cancel;

  if ((0, _isNumber3.default)(ms) &#x26;&#x26; ms &#x3e; 0) {
    this._timeout = ms;
    if (cancel) {
      this.client.assertCanCancelQuery();
      this._cancelOnTimeout = true;
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this = this;

this.builder.emit(&#x27;query&#x27;, (0, _assign3.default)({ __knexUid: this.connection.__knexUid }, obj));
var runner = this;
var queryPromise = this.client.query(this.connection, obj);

if (obj.timeout) {
  queryPromise = queryPromise.<span class="apidocCodeKeywordSpan">timeout</span>(obj.timeout);
}

return queryPromise.then(function (resp) {
  var processedResponse = _this.client.processResponse(resp, runner);
  _this.builder.emit(&#x27;query-response&#x27;, processedResponse, (0, _assign3.default)({ __knexUid: _this.connection.__knexUid
 }, obj), _this.builder);
  _this.client.emit(&#x27;query-response&#x27;, processedResponse, (0, _assign3.default)({ __knexUid: _this.connection.__knexUid
 }, obj), _this.builder);
  return processedResponse;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.toQuery" id="apidoc.element.knex.raw.prototype.toQuery">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toQuery
        <span class="apidocSignatureSpan">(tz)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toQuery = function (tz) {
  var _this = this;

  var data = this.toSQL(this._method, tz);
  if (!(0, _isArray3.default)(data)) data = [data];
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._wrappedAfter = after;
  return this;
},


// Calls `toString` on the Knex object.
toString: function toString() {
  return this.<span class="apidocCodeKeywordSpan">toQuery</span>();
},


// Returns the raw sql for the query.
toSQL: function toSQL(method, tz) {
  var obj = void 0;
  var formatter = this.client.formatter();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.toSQL" id="apidoc.element.knex.raw.prototype.toSQL">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toSQL
        <span class="apidocSignatureSpan">(method, tz)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toSQL(method, tz) {
  var obj = void 0;
  var formatter = this.client.formatter();

  if (Array.isArray(this.bindings)) {
    obj = replaceRawArrBindings(this, formatter);
  } else if (this.bindings &#x26;&#x26; (0, _isPlainObject3.default)(this.bindings)) {
    obj = replaceKeyBindings(this, formatter);
  } else {
    obj = {
      method: &#x27;raw&#x27;,
      sql: this.sql,
      bindings: (0, _isUndefined3.default)(this.bindings) ? [] : [this.bindings]
    };
  }

  if (this._wrappedBefore) {
    obj.sql = this._wrappedBefore + obj.sql;
  }
  if (this._wrappedAfter) {
    obj.sql = obj.sql + this._wrappedAfter;
  }

  obj.options = (0, _reduce3.default)(this._options, _assign3.default, {});

  if (this._timeout) {
    obj.timeout = this._timeout;
    if (this._cancelOnTimeout) {
      obj.cancelOnTimeout = this._cancelOnTimeout;
    }
  }

  obj.bindings = obj.bindings || [];
  if (helpers.containsUndefined(obj.bindings)) {
    debugBindings(obj.bindings);
    throw new Error(&#x27;Undefined binding(s) detected when compiling RAW query: &#x27; + obj.sql);
  }

  obj.__knexQueryUid = _uuid2.default.v4();

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  return this.unwrapRaw(value, true) || &#x27;?&#x27;;
};

Formatter.prototype.unwrapRaw = function unwrapRaw(value, isParameter) {
  var query = void 0;
  if (value instanceof _builder2.default) {
    query = this.client.queryCompiler(value).<span class="apidocCodeKeywordSpan">toSQL</span>();
    if (query.bindings) {
      this.bindings = this.bindings.concat(query.bindings);
    }
    return this.outputQuery(query, isParameter);
  }
  if (value instanceof _raw2.default) {
    value.client = this.client;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.toString" id="apidoc.element.knex.raw.prototype.toString">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() {
  return this.toQuery();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.transacting" id="apidoc.element.knex.raw.prototype.transacting">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>transacting
        <span class="apidocSignatureSpan">(t)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transacting = function (t) {
  if (t &#x26;&#x26; t.client) {
    if (!t.client.transacting) {
      helpers.warn(&#x27;Invalid transaction value: &#x27; + t.client);
    } else {
      this.client = t.client;
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.wrap" id="apidoc.element.knex.raw.prototype.wrap">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>wrap
        <span class="apidocSignatureSpan">(before, after)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function wrap(before, after) {
  this._wrappedBefore = before;
  this._wrappedAfter = after;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Formatter.prototype.columnize = function columnize(target) {
  var columns = typeof target === &#x27;string&#x27; ? [target] : target;
  var str = &#x27;&#x27;,
      i = -1;
  while (++i &#x3c; columns.length) {
    if (i &#x3e; 0) str += &#x27;, &#x27;;
    str += this.<span class="apidocCodeKeywordSpan">wrap</span>(columns[i]);
  }
  return str;
};

// Turns a list of values into a list of ?&#x27;s, joining them with commas unless
// a &#x22;joining&#x22; value is specified (e.g. &#x27; and &#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.raw.prototype.yield" id="apidoc.element.knex.raw.prototype.yield">
        function <span class="apidocSignatureSpan">knex.raw.prototype.</span>yield
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">yield = function () {
  var promise = this.then();
  return promise[method].apply(promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.runner" id="apidoc.module.knex.runner">module knex.runner</a></h1>


    <h2>
        <a href="#apidoc.element.knex.runner.runner" id="apidoc.element.knex.runner.runner">
        function <span class="apidocSignatureSpan">knex.</span>runner
        <span class="apidocSignatureSpan">(client, builder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Runner(client, builder) {
  this.client = client;
  this.builder = builder;
  this.queries = [];

  // The &#x22;connection&#x22; object is set on the runner when
  // &#x22;run&#x22; is called.
  this.connection = void 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.<span class="apidocCodeKeywordSpan">runner</span>(this).run();
  return result.then.apply(result, arguments);
};

// Add additional &#x22;options&#x22; to the builder. Typically used for client specific
// items, like the `mysql` and `sqlite3` drivers.
Target.prototype.options = function (opts) {
  this._options = this._options || [];
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.runner.prototype" id="apidoc.module.knex.runner.prototype">module knex.runner.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.runner.prototype.ensureConnection" id="apidoc.element.knex.runner.prototype.ensureConnection">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>ensureConnection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ensureConnection() {
  var _this2 = this;

  return _bluebird2.default.try(function () {
    return _this2.connection || new _bluebird2.default(function (resolver, rejecter) {
      // need to return promise or null from handler to prevent warning from bluebird
      return _this2.client.acquireConnection().then(resolver).catch(_bluebird2.default.TimeoutError, function (error) {
        if (_this2.builder) {
          error.sql = _this2.builder.sql;
          error.bindings = _this2.builder.bindings;
        }
        throw error;
      }).catch(rejecter);
    });
  }).disposer(function () {
    // need to return promise or null from handler to prevent warning from bluebird
    return _this2.client.releaseConnection(_this2.connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
(0, _assign3.default)(Runner.prototype, {

  // &#x22;Run&#x22; the target, calling &#x22;toSQL&#x22; on the builder, returning
  // an object or array of queries to run, each of which are run on
  // a single connection.
  run: function run() {
    var runner = this;
    return _bluebird2.default.using(this.<span class="apidocCodeKeywordSpan">ensureConnection</span>(), function (connection) {
runner.connection = connection;

runner.client.emit(&#x27;start&#x27;, runner.builder);
runner.builder.emit(&#x27;start&#x27;, runner.builder);
var sql = runner.builder.toSQL();

if (runner.builder._debug) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner.prototype.pipe" id="apidoc.element.knex.runner.prototype.pipe">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>pipe
        <span class="apidocSignatureSpan">(writable, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pipe(writable, options) {
  return this.stream(options).pipe(writable);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Initializes a stream.
Target.prototype.stream = function (options) {
  return this.client.runner(this).stream(options);
};

// Initialize a stream &#x26; pipe automatically.
Target.prototype.pipe = function (writable, options) {
  return this.client.runner(this).<span class="apidocCodeKeywordSpan">pipe</span>(writable, options);
};

// Creates a method which &#x22;coerces&#x22; to a promise, by calling a
// &#x22;then&#x22; method on the current `Target`
(0, _each3.default)([&#x27;bind&#x27;, &#x27;catch&#x27;, &#x27;finally&#x27;, &#x27;asCallback&#x27;, &#x27;spread&#x27;, &#x27
;map&#x27;, &#x27;reduce&#x27;, &#x27;tap&#x27;, &#x27;thenReturn&#x27;, &#x27;return&#x27;, &#x27;yield&#x27;, &#x27;ensure&#x27
;, &#x27;reflect&#x27;, &#x27;get&#x27;, &#x27;mapSeries&#x27;, &#x27;delay&#x27;], function (method) {
  Target.prototype[method] = function () {
    var promise = this.then();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner.prototype.query" id="apidoc.element.knex.runner.prototype.query">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>query
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function () {
    var ret = new Promise(INTERNAL);
    ret._captureStackTrace();
    ret._pushContext();
    var value = tryCatch(fn).apply(this, arguments);
    var promiseCreated = ret._popContext();
    debug.checkForgottenReturns(
        value, promiseCreated, &#x22;Promise.method&#x22;, ret);
    ret._resolveFromSyncValue(value);
    return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (runner.builder._debug) {
    helpers.debugLog(sql);
  }

  if ((0, _isArray3.default)(sql)) {
    return runner.queryArray(sql);
  }
  return runner.<span class="apidocCodeKeywordSpan">query</span>(sql);
})

// If there are any &#x22;error&#x22; listeners, we fire an error event
// and then re-throw the error to be eventually handled by
// the promise chain. Useful if you&#x27;re wrapping in a custom `Promise`.
.catch(function (err) {
  if (runner.builder._events &#x26;&#x26; runner.builder._events.error) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner.prototype.queryArray" id="apidoc.element.knex.runner.prototype.queryArray">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>queryArray
        <span class="apidocSignatureSpan">(queries)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.bind(this).return(queries).reduce(function (memo, query
) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var sql = runner.builder.toSQL();

  if (runner.builder._debug) {
    helpers.debugLog(sql);
  }

  if ((0, _isArray3.default)(sql)) {
    return runner.<span class="apidocCodeKeywordSpan">queryArray</span>(sql);
  }
  return runner.query(sql);
})

// If there are any &#x22;error&#x22; listeners, we fire an error event
// and then re-throw the error to be eventually handled by
// the promise chain. Useful if you&#x27;re wrapping in a custom `Promise`.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner.prototype.run" id="apidoc.element.knex.runner.prototype.run">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function run() {
  var runner = this;
  return _bluebird2.default.using(this.ensureConnection(), function (connection) {
    runner.connection = connection;

    runner.client.emit(&#x27;start&#x27;, runner.builder);
    runner.builder.emit(&#x27;start&#x27;, runner.builder);
    var sql = runner.builder.toSQL();

    if (runner.builder._debug) {
      helpers.debugLog(sql);
    }

    if ((0, _isArray3.default)(sql)) {
      return runner.queryArray(sql);
    }
    return runner.query(sql);
  })

  // If there are any &#x22;error&#x22; listeners, we fire an error event
  // and then re-throw the error to be eventually handled by
  // the promise chain. Useful if you&#x27;re wrapping in a custom `Promise`.
  .catch(function (err) {
    if (runner.builder._events &#x26;&#x26; runner.builder._events.error) {
      runner.builder.emit(&#x27;error&#x27;, err);
    }
    throw err;
  })

  // Fire a single &#x22;end&#x22; event on the builder when
  // all queries have successfully completed.
  .tap(function () {
    runner.builder.emit(&#x27;end&#x27;);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.runner(this).<span class="apidocCodeKeywordSpan">run</span>();
  return result.then.apply(result, arguments);
};

// Add additional &#x22;options&#x22; to the builder. Typically used for client specific
// items, like the `mysql` and `sqlite3` drivers.
Target.prototype.options = function (opts) {
  this._options = this._options || [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.runner.prototype.stream" id="apidoc.element.knex.runner.prototype.stream">
        function <span class="apidocSignatureSpan">knex.runner.prototype.</span>stream
        <span class="apidocSignatureSpan">(options, handler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stream(options, handler) {

  // If we specify stream(handler).then(...
  if (arguments.length === 1) {
    if (typeof options === &#x27;function&#x27;) {
      handler = options;
      options = {};
    }
  }

  // Determines whether we emit an error or throw here.
  var hasHandler = typeof handler === &#x27;function&#x27;;

  // Lazy-load the &#x22;PassThrough&#x22; dependency.
  PassThrough = PassThrough || require(&#x27;readable-stream&#x27;).PassThrough;

  var runner = this;
  var stream = new PassThrough({ objectMode: true });
  var promise = _bluebird2.default.using(this.ensureConnection(), function (connection) {
    runner.connection = connection;
    var sql = runner.builder.toSQL();
    var err = new Error(&#x27;The stream may only be used with a single query statement.&#x27;);
    if ((0, _isArray3.default)(sql)) {
      if (hasHandler) throw err;
      stream.emit(&#x27;error&#x27;, err);
    }
    return runner.client.stream(runner.connection, sql, stream, options);
  });

  // If a function is passed to handle the stream, send the stream
  // there and return the promise, otherwise just return the stream
  // and the promise will take care of itsself.
  if (hasHandler) {
    handler(stream);
    return promise;
  }

  // This promise is unreachable since no handler was given, so noop any
  // exceptions. Errors should be handled in the stream&#x27;s &#x27;error&#x27; event.
  promise.catch(_noop3.default);
  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  }
  return this;
};

// Initializes a stream.
Target.prototype.stream = function (options) {
  return this.client.runner(this).<span class="apidocCodeKeywordSpan">stream</span>(options);
};

// Initialize a stream &#x26; pipe automatically.
Target.prototype.pipe = function (writable, options) {
  return this.client.runner(this).pipe(writable, options);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.seed" id="apidoc.module.knex.seed">module knex.seed</a></h1>


    <h2>
        <a href="#apidoc.element.knex.seed.seed" id="apidoc.element.knex.seed.seed">
        function <span class="apidocSignatureSpan">knex.</span>seed
        <span class="apidocSignatureSpan">(knex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Seeder(knex) {
  this.knex = knex;
  this.config = this.setConfig(knex.client.config.seeds);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.seed.prototype" id="apidoc.module.knex.seed.prototype">module knex.seed.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.seed.prototype._absoluteConfigDir" id="apidoc.element.knex.seed.prototype._absoluteConfigDir">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_absoluteConfigDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_absoluteConfigDir = function () {
  return _path2.default.resolve(process.cwd(), this.config.directory);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._ensureFolder" id="apidoc.element.knex.seed.prototype._ensureFolder">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_ensureFolder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ensureFolder = function () {
  var dir = this._absoluteConfigDir();
  return _bluebird2.default.promisify(_fs2.default.stat, { context: _fs2.default })(dir).catch(function () {
    return _bluebird2.default.promisify(_mkdirp2.default)(dir);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._generateStubTemplate" id="apidoc.element.knex.seed.prototype._generateStubTemplate">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_generateStubTemplate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_generateStubTemplate = function () {
  var stubPath = this.config.stub || _path2.default.join(__dirname, &#x27;stub&#x27;, this.config.extension + &#x27;.stub&#x27;);
  return _bluebird2.default.promisify(_fs2.default.readFile, { context: _fs2.default })(stubPath).then(function (stub) {
    return (0, _template3.default)(stub.toString(), { variable: &#x27;d&#x27; });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._listAll" id="apidoc.element.knex.seed.prototype._listAll">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_listAll
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_listAll = function () {
    var ret = new Promise(INTERNAL);
    ret._captureStackTrace();
    ret._pushContext();
    var value = tryCatch(fn).apply(this, arguments);
    var promiseCreated = ret._popContext();
    debug.checkForgottenReturns(
        value, promiseCreated, &#x22;Promise.method&#x22;, ret);
    ret._resolveFromSyncValue(value);
    return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._runSeeds" id="apidoc.element.knex.seed.prototype._runSeeds">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_runSeeds
        <span class="apidocSignatureSpan">(seeds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_runSeeds = function (seeds) {
  return _bluebird2.default.all((0, _map3.default)(seeds, (0, _bind3.default)(this._validateSeedStructure, this))).bind(this).then
(function (seeds) {
    return _bluebird2.default.bind(this).then(function () {
      return this._waterfallBatch(seeds);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._seedData" id="apidoc.element.knex.seed.prototype._seedData">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_seedData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_seedData = function () {
  return _bluebird2.default.join(this._listAll());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._validateSeedStructure" id="apidoc.element.knex.seed.prototype._validateSeedStructure">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_validateSeedStructure
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validateSeedStructure = function (name) {
  var seed = require(_path2.default.join(this._absoluteConfigDir(), name));
  if (typeof seed.seed !== &#x27;function&#x27;) {
    throw new Error(&#x27;Invalid seed file: &#x27; + name + &#x27; must have a seed function&#x27;);
  }
  return name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._waterfallBatch" id="apidoc.element.knex.seed.prototype._waterfallBatch">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_waterfallBatch
        <span class="apidocSignatureSpan">(seeds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_waterfallBatch = function (seeds) {
  var knex = this.knex;

  var seedDirectory = this._absoluteConfigDir();
  var current = _bluebird2.default.bind({ failed: false, failedOn: 0 });
  var log = [];
  (0, _each3.default)(seeds, function (seed) {
    var name = _path2.default.join(seedDirectory, seed);
    seed = require(name);

    // Run each seed file.
    current = current.then(function () {
      return seed.seed(knex, _bluebird2.default);
    }).then(function () {
      log.push(name);
    });
  });

  return current.thenReturn([log]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype._writeNewSeed" id="apidoc.element.knex.seed.prototype._writeNewSeed">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>_writeNewSeed
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_writeNewSeed = function (name) {
  var config = this.config;

  var dir = this._absoluteConfigDir();
  return function (tmpl) {
    if (name[0] === &#x27;-&#x27;) name = name.slice(1);
    var filename = name + &#x27;.&#x27; + config.extension;
    return _bluebird2.default.promisify(_fs2.default.writeFile, { context: _fs2.default })(_path2.default.join(dir, filename), tmpl
(config.variables || {})).return(_path2.default.join(dir, filename));
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype.make" id="apidoc.element.knex.seed.prototype.make">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>make
        <span class="apidocSignatureSpan">(name, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">make = function (name, config) {
  this.config = this.setConfig(config);
  if (!name) _bluebird2.default.rejected(new Error(&#x27;A name must be specified for the generated seed&#x27;));
  return this._ensureFolder(config).bind(this).then(this._generateStubTemplate).then(this._writeNewSeed(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype.run" id="apidoc.element.knex.seed.prototype.run">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function () {
    var ret = new Promise(INTERNAL);
    ret._captureStackTrace();
    ret._pushContext();
    var value = tryCatch(fn).apply(this, arguments);
    var promiseCreated = ret._popContext();
    debug.checkForgottenReturns(
        value, promiseCreated, &#x22;Promise.method&#x22;, ret);
    ret._resolveFromSyncValue(value);
    return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return (0, _map3.default)(data, function (statement) {
    return _this.client._formatQuery(statement.sql, statement.bindings, tz);
  }).join(&#x27;;\n&#x27;);
};

// Create a new instance of the `Runner`, passing in the current object.
Target.prototype.then = function () /* onFulfilled, onRejected */{
  var result = this.client.runner(this).<span class="apidocCodeKeywordSpan">run</span>();
  return result.then.apply(result, arguments);
};

// Add additional &#x22;options&#x22; to the builder. Typically used for client specific
// items, like the `mysql` and `sqlite3` drivers.
Target.prototype.options = function (opts) {
  this._options = this._options || [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.seed.prototype.setConfig" id="apidoc.element.knex.seed.prototype.setConfig">
        function <span class="apidocSignatureSpan">knex.seed.prototype.</span>setConfig
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setConfig = function (config) {
  return (0, _extend3.default)({
    extension: &#x27;js&#x27;,
    directory: &#x27;./seeds&#x27;
  }, this.config || {}, config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.transaction" id="apidoc.module.knex.transaction">module knex.transaction</a></h1>


    <h2>
        <a href="#apidoc.element.knex.transaction.transaction" id="apidoc.element.knex.transaction.transaction">
        function <span class="apidocSignatureSpan">knex.</span>transaction
        <span class="apidocSignatureSpan">(client, container, config, outerTx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Transaction(client, container, config, outerTx) {
  (0, _classCallCheck3.default)(this, Transaction);

  var _this = (0, _possibleConstructorReturn3.default)(this, _EventEmitter.call(this));

  var txid = _this.txid = (0, _uniqueId3.default)(&#x27;trx&#x27;);

  _this.client = client;
  _this.outerTx = outerTx;
  _this.trxClient = undefined;
  _this._debug = client.config &#x26;&#x26; client.config.debug;

  debug(&#x27;%s: Starting %s transaction&#x27;, txid, outerTx ? &#x27;nested&#x27; : &#x27;top level&#x27;);

  _this._promise = _bluebird2.default.using(_this.acquireConnection(client, config, txid), function (connection) {

    var trxClient = _this.trxClient = makeTxClient(_this, client, connection);
    var init = client.transacting ? _this.savepoint(connection) : _this.begin(connection);

    init.then(function () {
      return makeTransactor(_this, connection, trxClient);
    }).then(function (transactor) {
      // If we&#x27;ve returned a &#x22;thenable&#x22; from the transaction container, assume
      // the rollback and commit are chained to this object&#x27;s success / failure.
      // Directly thrown errors are treated as automatic rollbacks.
      var result = void 0;
      try {
        result = container(transactor);
      } catch (err) {
        result = _bluebird2.default.reject(err);
      }
      if (result &#x26;&#x26; result.then &#x26;&#x26; typeof result.then === &#x27;function&#x27;) {
        result.then(function (val) {
          return transactor.commit(val);
        }).catch(function (err) {
          return transactor.rollback(err);
        });
      }
      return null;
    }).catch(function (e) {
      return _this._rejecter(e);
    });

    return new _bluebird2.default(function (resolver, rejecter) {
      _this._resolver = resolver;
      _this._rejecter = rejecter;
    });
  });

  _this._completed = false;

  // If there&#x27;s a wrapping transaction, we need to wait for any older sibling
  // transactions to settle (commit or rollback) before we can start, and we
  // need to register ourselves with the parent transaction so any younger
  // siblings can wait for us to complete before they can start.
  _this._previousSibling = _bluebird2.default.resolve(true);
  if (outerTx) {
    if (outerTx._lastChild) _this._previousSibling = outerTx._lastChild;
    outerTx._lastChild = _this._promise;
  }
  return _this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports.default = Transaction;
function makeTransactor(trx, connection, trxClient) {

var transactor = (0, _makeKnex2.default)(trxClient);

transactor.transaction = function (container, options) {
  return trxClient.<span class="apidocCodeKeywordSpan">transaction</span>(container, options, trx);
};
transactor.savepoint = function (container, options) {
  return transactor.transaction(container, options);
};

if (trx.client.transacting) {
  transactor.commit = function (value) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.knex.transaction.prototype" id="apidoc.module.knex.transaction.prototype">module knex.transaction.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.acquireConnection" id="apidoc.element.knex.transaction.prototype.acquireConnection">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>acquireConnection
        <span class="apidocSignatureSpan">(client, config, txid)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function acquireConnection(client, config, txid) {
  var configConnection = config &#x26;&#x26; config.connection;
  return _bluebird2.default.try(function () {
    return configConnection || client.acquireConnection();
  }).disposer(function (connection) {
    if (!configConnection) {
      debug(&#x27;%s: releasing connection&#x27;, txid);
      client.releaseConnection(connection);
    } else {
      debug(&#x27;%s: not releasing external connection&#x27;, txid);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Check whether there&#x27;s a transaction flag, and that it has a connection.
  ensureConnection: function ensureConnection() {
var _this2 = this;

return _bluebird2.default.try(function () {
  return _this2.connection || new _bluebird2.default(function (resolver, rejecter) {
    // need to return promise or null from handler to prevent warning from bluebird
    return _this2.client.<span class="apidocCodeKeywordSpan">acquireConnection</span>().then(resolver).catch(_bluebird2.default.
TimeoutError, function (error) {
      if (_this2.builder) {
        error.sql = _this2.builder.sql;
        error.bindings = _this2.builder.bindings;
      }
      throw error;
    }).catch(rejecter);
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.asCallback" id="apidoc.element.knex.transaction.prototype.asCallback">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>asCallback
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">asCallback = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.begin" id="apidoc.element.knex.transaction.prototype.begin">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>begin
        <span class="apidocSignatureSpan">(conn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function begin(conn) {
  return this.query(conn, &#x27;BEGIN;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _this._debug = client.config &#x26;&#x26; client.config.debug;

    debug(&#x27;%s: Starting %s transaction&#x27;, txid, outerTx ? &#x27;nested&#x27; : &#x27;top level&#x27;);

    _this._promise = _bluebird2.default.using(_this.acquireConnection(client, config, txid), function (connection) {

var trxClient = _this.trxClient = makeTxClient(_this, client, connection);
var init = client.transacting ? _this.savepoint(connection) : _this.<span class="apidocCodeKeywordSpan">begin</span>(connection);

init.then(function () {
  return makeTransactor(_this, connection, trxClient);
}).then(function (transactor) {
  // If we&#x27;ve returned a &#x22;thenable&#x22; from the transaction container, assume
  // the rollback and commit are chained to this object&#x27;s success / failure.
  // Directly thrown errors are treated as automatic rollbacks.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.bind" id="apidoc.element.knex.transaction.prototype.bind">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>bind
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bind = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.<span class="apidocCodeKeywordSpan">bind</span>(this
).return(queries).reduce(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.catch" id="apidoc.element.knex.transaction.prototype.catch">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>catch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">catch = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// .map over the results
.map(function(row) {
  console.log(row);
})

// Finally, add a .catch handler for the promise chain
.<span class="apidocCodeKeywordSpan">catch</span>(function(e) {
  console.error(e);
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.commit" id="apidoc.element.knex.transaction.prototype.commit">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>commit
        <span class="apidocSignatureSpan">(conn, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function commit(conn, value) {
  return this.query(conn, &#x27;COMMIT;&#x27;, 1, value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  try {
    result = container(transactor);
  } catch (err) {
    result = _bluebird2.default.reject(err);
  }
  if (result &#x26;&#x26; result.then &#x26;&#x26; typeof result.then === &#x27;function&#x27;) {
    result.then(function (val) {
      return transactor.<span class="apidocCodeKeywordSpan">commit</span>(val);
    }).catch(function (err) {
      return transactor.rollback(err);
    });
  }
  return null;
}).catch(function (e) {
  return _this._rejecter(e);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.debug" id="apidoc.element.knex.transaction.prototype.debug">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>debug
        <span class="apidocSignatureSpan">(enabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function debug(enabled) {
  this._debug = arguments.length ? enabled : true;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.delay" id="apidoc.element.knex.transaction.prototype.delay">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>delay
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delay = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.ensure" id="apidoc.element.knex.transaction.prototype.ensure">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>ensure
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ensure = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.exec" id="apidoc.element.knex.transaction.prototype.exec">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>exec
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exec = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.finally" id="apidoc.element.knex.transaction.prototype.finally">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>finally
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">finally = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.get" id="apidoc.element.knex.transaction.prototype.get">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.isCompleted" id="apidoc.element.knex.transaction.prototype.isCompleted">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>isCompleted
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isCompleted() {
  return this._completed || this.outerTx &#x26;&#x26; this.outerTx.isCompleted() || false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (outerTx._lastChild) _this._previousSibling = outerTx._lastChild;
    outerTx._lastChild = _this._promise;
  }
  return _this;
}

Transaction.prototype.isCompleted = function isCompleted() {
  return this._completed || this.outerTx &#x26;&#x26; this.outerTx.<span class="apidocCodeKeywordSpan">isCompleted</span>() || false
;
};

Transaction.prototype.begin = function begin(conn) {
  return this.query(conn, &#x27;BEGIN;&#x27;);
};

Transaction.prototype.savepoint = function savepoint(conn) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.map" id="apidoc.element.knex.transaction.prototype.map">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>map
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.then(function() {
  return knex(&#x27;users&#x27;)
    .join(&#x27;accounts&#x27;, &#x27;users.id&#x27;, &#x27;accounts.user_id&#x27;)
    .select(&#x27;users.user_name as user&#x27;, &#x27;accounts.account_name as account&#x27;);
})

// .map over the results
.<span class="apidocCodeKeywordSpan">map</span>(function(row) {
  console.log(row);
})

// Finally, add a .catch handler for the promise chain
.catch(function(e) {
  console.error(e);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.mapSeries" id="apidoc.element.knex.transaction.prototype.mapSeries">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>mapSeries
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mapSeries = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.query" id="apidoc.element.knex.transaction.prototype.query">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>query
        <span class="apidocSignatureSpan">(conn, sql, status, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(conn, sql, status, value) {
  var _this4 = this;

  var q = this.trxClient.query(conn, sql).catch(function (err) {
    status = 2;
    value = err;
    _this4._completed = true;
    debug(&#x27;%s error running transaction query&#x27;, _this4.txid);
  }).tap(function () {
    if (status === 1) {
      _this4._resolver(value);
    }
    if (status === 2) {
      if ((0, _isUndefined3.default)(value)) {
        value = new Error(&#x27;Transaction rejected with non-error: &#x27; + value);
      }
      _this4._rejecter(value);
    }
  });
  if (status === 1 || status === 2) {
    this._completed = true;
  }
  return q;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (runner.builder._debug) {
    helpers.debugLog(sql);
  }

  if ((0, _isArray3.default)(sql)) {
    return runner.queryArray(sql);
  }
  return runner.<span class="apidocCodeKeywordSpan">query</span>(sql);
})

// If there are any &#x22;error&#x22; listeners, we fire an error event
// and then re-throw the error to be eventually handled by
// the promise chain. Useful if you&#x27;re wrapping in a custom `Promise`.
.catch(function (err) {
  if (runner.builder._events &#x26;&#x26; runner.builder._events.error) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.reduce" id="apidoc.element.knex.transaction.prototype.reduce">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>reduce
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduce = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.bind(this).return(queries).<span class="apidocCodeKeywordSpan
">reduce</span>(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.reflect" id="apidoc.element.knex.transaction.prototype.reflect">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>reflect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reflect = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.release" id="apidoc.element.knex.transaction.prototype.release">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>release
        <span class="apidocSignatureSpan">(conn, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function release(conn, value) {
  return this.query(conn, &#x27;RELEASE SAVEPOINT &#x27; + this.txid + &#x27;;&#x27;, 1, value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};
transactor.savepoint = function (container, options) {
  return transactor.transaction(container, options);
};

if (trx.client.transacting) {
  transactor.commit = function (value) {
    return trx.<span class="apidocCodeKeywordSpan">release</span>(connection, value);
  };
  transactor.rollback = function (error) {
    return trx.rollbackTo(connection, error);
  };
} else {
  transactor.commit = function (value) {
    return trx.commit(connection, value);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.return" id="apidoc.element.knex.transaction.prototype.return">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>return
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">return = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    throw error;
  });
}),

// In the case of the &#x22;schema builder&#x22; we call `queryArray`, which runs each
// of the queries in sequence.
queryArray: function queryArray(queries) {
  return queries.length === 1 ? this.query(queries[0]) : _bluebird2.default.bind(this).<span class="apidocCodeKeywordSpan">return
</span>(queries).reduce(function (memo, query) {
    return this.query(query).then(function (resp) {
      memo.push(resp);
      return memo;
    });
  }, []);
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.rollback" id="apidoc.element.knex.transaction.prototype.rollback">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>rollback
        <span class="apidocSignatureSpan">(conn, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollback(conn, error) {
  var _this2 = this;

  return this.query(conn, &#x27;ROLLBACK;&#x27;, 2, error).timeout(5000).catch(_bluebird2.default.TimeoutError, function () {
    _this2._resolver();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  } catch (err) {
    result = _bluebird2.default.reject(err);
  }
  if (result &#x26;&#x26; result.then &#x26;&#x26; typeof result.then === &#x27;function&#x27;) {
    result.then(function (val) {
      return transactor.commit(val);
    }).catch(function (err) {
      return transactor.<span class="apidocCodeKeywordSpan">rollback</span>(err);
    });
  }
  return null;
}).catch(function (e) {
  return _this._rejecter(e);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.rollbackTo" id="apidoc.element.knex.transaction.prototype.rollbackTo">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>rollbackTo
        <span class="apidocSignatureSpan">(conn, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollbackTo(conn, error) {
  var _this3 = this;

  return this.query(conn, &#x27;ROLLBACK TO SAVEPOINT &#x27; + this.txid, 2, error).timeout(5000).catch(_bluebird2.default.TimeoutError, function
 () {
    _this3._resolver();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

if (trx.client.transacting) {
  transactor.commit = function (value) {
    return trx.release(connection, value);
  };
  transactor.rollback = function (error) {
    return trx.<span class="apidocCodeKeywordSpan">rollbackTo</span>(connection, error);
  };
} else {
  transactor.commit = function (value) {
    return trx.commit(connection, value);
  };
  transactor.rollback = function (error) {
    return trx.rollback(connection, error);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.savepoint" id="apidoc.element.knex.transaction.prototype.savepoint">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>savepoint
        <span class="apidocSignatureSpan">(conn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function savepoint(conn) {
  return this.query(conn, &#x27;SAVEPOINT &#x27; + this.txid + &#x27;;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _this._debug = client.config &#x26;&#x26; client.config.debug;

    debug(&#x27;%s: Starting %s transaction&#x27;, txid, outerTx ? &#x27;nested&#x27; : &#x27;top level&#x27;);

    _this._promise = _bluebird2.default.using(_this.acquireConnection(client, config, txid), function (connection) {

var trxClient = _this.trxClient = makeTxClient(_this, client, connection);
var init = client.transacting ? _this.<span class="apidocCodeKeywordSpan">savepoint</span>(connection) : _this.begin(connection);

init.then(function () {
  return makeTransactor(_this, connection, trxClient);
}).then(function (transactor) {
  // If we&#x27;ve returned a &#x22;thenable&#x22; from the transaction container, assume
  // the rollback and commit are chained to this object&#x27;s success / failure.
  // Directly thrown errors are treated as automatic rollbacks.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.spread" id="apidoc.element.knex.transaction.prototype.spread">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>spread
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spread = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.tap" id="apidoc.element.knex.transaction.prototype.tap">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>tap
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tap = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      runner.builder.emit(&#x27;error&#x27;, err);
    }
    throw err;
  })

  // Fire a single &#x22;end&#x22; event on the builder when
  // all queries have successfully completed.
  .<span class="apidocCodeKeywordSpan">tap</span>(function () {
    runner.builder.emit(&#x27;end&#x27;);
  });
},


// Stream the result set, by passing through to the dialect&#x27;s streaming
// capabilities. If the options are
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.then" id="apidoc.element.knex.transaction.prototype.then">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>then
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">then = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.createTable(&#x27;accounts&#x27;, function(table) {
  table.increments(&#x27;id&#x27;);
  table.string(&#x27;account_name&#x27;);
  table.integer(&#x27;user_id&#x27;).unsigned().references(&#x27;users.id&#x27;);
})

// Then query the table...
.<span class="apidocCodeKeywordSpan">then</span>(function() {
  return knex.insert({user_name: &#x27;Tim&#x27;}).into(&#x27;users&#x27;);
})

// ...and using the insert id, insert into the other table.
.then(function(rows) {
  return knex.table(&#x27;accounts&#x27;).insert({account_name: &#x27;knex&#x27;, user_id: rows[0]});
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.thenReturn" id="apidoc.element.knex.transaction.prototype.thenReturn">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>thenReturn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">thenReturn = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.knex.transaction.prototype.yield" id="apidoc.element.knex.transaction.prototype.yield">
        function <span class="apidocSignatureSpan">knex.transaction.prototype.</span>yield
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">yield = function () {
  return this._promise = this._promise[method].apply(this._promise, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
